# $Id: Portfile 27715 2007-08-12 16:30:35Z nox@macports.org $

PortSystem 1.0

name			jailkit
version			2.4
categories		security sysutils
platforms		darwin
maintainers		nomaintainer
description		utilities to create limited user accounts in a chroot jail
long_description	Jailkit is a set of utilities to allow quick creation of \
					limited user accounts in a chroot jail. It contains a safe \
					logging daemon, shells that can restrict users, utilities \
					to start daemons in a chroot jail, and utilities for easy \
					setup of chroot jails.

homepage		http://olivier.sessink.nl/jailkit/
master_sites	${homepage}
checksums		md5 84b21322495d597455a4758206e87b7c \
				sha1 f86161ee8abddf335299605c46d1a891d481db0a \
				rmd160 0b4362c83ded29b6b048c241daf67b4129563ec1
use_bzip2		yes
patchfiles		patch-Makefile.in
depends_lib		bin:python:python23

destroot.destdir	prefix=${destroot}${prefix} \
				iniprefix=${destroot}${prefix}/etc/jailkit

post-patch {
	foreach {dir} {man py src} {
		reinplace -E "s/-g 0 -o (root|0)//" ${worksrcpath}/${dir}/Makefile.in
	}
}
			

post-destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} COPYRIGHT INSTALL.txt README.txt \
		${destroot}${prefix}/share/doc/${name}
}
