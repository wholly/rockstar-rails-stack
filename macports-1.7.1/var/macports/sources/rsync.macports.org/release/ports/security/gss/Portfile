# $Id: Portfile 30908 2007-11-10 23:07:44Z simon@macports.org $

PortSystem 1.0
name             gss
version          0.0.22
categories       security
maintainers      nomaintainer
description      GNU Generic Security Service Library
long_description \
	GSS is an implementation of the Generic Security Service \
	Application Program Interface (GSS-API). GSS-API is used \
	by network servers to provide security services, e.g., to \
	authenticate SMTP/IMAP clients against SMTP/IMAP servers.
homepage         http://www.gnu.org/software/gss/
platforms        darwin

master_sites     ftp://alpha.gnu.org/gnu/${name} http://josefsson.org/${name}/releases
checksums        md5 e296992cc7fca764c1f32c3adffa089e \
                 sha1 c1c48172efb1b088e388f5bf1d3a2392dbc80490 \
                 sha224 02245aa5e9b8a85de10540aa30cd28b42db21e972e364fd919823c95

depends_lib	 lib:libiconv:libiconv

set docdir	 ${prefix}/share/doc/${name}-${version}

configure.args   --infodir=${prefix}/share/info \
                 --mandir=${prefix}/share/man \
		 --docdir=${docdir} \
		 --disable-kerberos5 \
		 --with-libiconv-prefix=${prefix} \
		 --disable-nls

variant nls description {Add NLS support} {
	depends_lib-append      lib:libintl:gettext
	configure.args-delete   --disable-nls
	configure.args-append   --with-libintl-prefix=${prefix}
}

post-destroot {
        xinstall -m 0755 -d ${destroot}${docdir}
        xinstall -m 0644 -W ${worksrcpath}/doc gss.html gss.pdf gss.ps ${destroot}${docdir}
}

livecheck.check regex
livecheck.url http://josefsson.org/gss/releases/?M=D
livecheck.regex ${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}
