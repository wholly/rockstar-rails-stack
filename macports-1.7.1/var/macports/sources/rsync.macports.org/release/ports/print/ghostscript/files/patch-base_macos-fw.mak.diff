--- base/macos-fw.mak.orig	2007-06-06 07:23:38.000000000 +0900
+++ base/macos-fw.mak	2009-02-07 13:57:00.000000000 +0900
@@ -67,8 +67,8 @@
 # Build the small Ghostscript loaders
 # it would be nice if we could link to the framework instead
 
-$(GSSOC_XE): $(GS_SO) $(GLSRC)dxmainc.c
-	$(GLCC) -g -o $(GSSOC_XE) $(GLSRC)dxmainc.c -L$(BINDIR) -l$(GS)
+$(GSSOC_XE): $(GS_SO) $(PSSRC)dxmainc.c
+	$(GLCC) -g -o $(GSSOC_XE) $(PSSRC)dxmainc.c -L$(BINDIR) -l$(GS)
 
 # ------------------------- Recursive make targets ------------------------- #
 
@@ -78,7 +78,7 @@
 # a separate .dylib target if we're going to build them at all
 # we should also be passing compatibility versions
 
-SODEFS=LDFLAGS='$(LDFLAGS) $(CFLAGS_SO) -dynamiclib -install_name $(prefix)/$(FRAMEWORK_NAME)'\
+SODEFS=LDFLAGS='$(LDFLAGS) $(CFLAGS_SO) -dynamiclib -install_name @@FRAMEWORKS_DIR@@/$(FRAMEWORK_NAME)$(FRAMEWORK_EXT)/$(FRAMEWORK_NAME)'\
  GS_XE=$(BINDIR)/$(SOBINRELDIR)/$(GS_SONAME_MAJOR_MINOR)\
  STDIO_IMPLEMENTATION=c\
  DISPLAY_DEV=$(DD)$(SOOBJRELDIR)/display.dev\
@@ -133,7 +133,7 @@
 	ln -s Versions/Current/doc . ;\
 	ln -s Versions/Current/$(FRAMEWORK_NAME) . )
 	pwd
-	cp src/iapi.h src/ierrors.h src/gdevdsp.h $(GS_FRAMEWORK)/Headers/
+	cp psi/iapi.h psi/ierrors.h base/gdevdsp.h $(GS_FRAMEWORK)/Headers/
 	cp lib/Info-macos.plist $(GS_FRAMEWORK)/Resources/
 	cp -r lib $(GS_FRAMEWORK)/Resources/
 	cp $(BINDIR)/$(SOBINRELDIR)/$(GS_SONAME_MAJOR_MINOR) $(GS_FRAMEWORK)/Versions/Current/$(FRAMEWORK_NAME)
