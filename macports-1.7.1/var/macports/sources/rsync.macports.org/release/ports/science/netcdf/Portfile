# $Id: Portfile 48266 2009-03-17 23:42:31Z blb@macports.org $

PortSystem 1.0
name		netcdf
version		4.0
maintainers	nomaintainer
platforms	darwin
categories	science

description	NetCDF - Network Common Data Form
long_description	NetCDF is an interface \
			for array-oriented data access and a library that \
			provides an implementation of the interface. The \
			netCDF library also defines a machine-independent \
			format for representing scientific data. Together, \
			the interface, library, and format support the \
			creation, access, and sharing of scientific data. \
			The netCDF software was developed at the Unidata \
			Program Center in Boulder, Colorado.

homepage	http://unidata.ucar.edu/packages/netcdf/

master_sites	ftp://ftp.unidata.ucar.edu/pub/netcdf/ \
		http://www.gfd-dennou.org/arch/netcdf/unidata-mirror/ \
		ftp://www.gfd-dennou.org/arch/netcdf/unidata-mirror/
checksums	sha1 bea99846265e55e54be2c200ae004acc3a221c0a

#depends_lib	port:hdf5 \
#            port:szip

configure.cppflags	"-DNDEBUG -Df2cFortran"
configure.cxxflags	"-O2 -fno-common"
configure.cflags	"-O2 -fno-common"
configure.args	--enable-shared  --disable-f77
#                --enable-netcdf-4
#                --with-szlib=${prefix}
#                --with-hdf5=${prefix}

test.run	yes
test.target	check

destroot.destdir	prefix=${destroot}${prefix} \
			MANDIR=\\\${prefix}/share/man

post-destroot {
	file delete -force ${destroot}${prefix}/share/man/whatis.db
}

variant g95 description {Enable Fortran support with g95} {
	depends_lib		port:g95
	configure.args-delete	--disable-f77
	configure.fc		${prefix}/bin/g95
	configure.env-append	FCFLAGS=-O2
}
