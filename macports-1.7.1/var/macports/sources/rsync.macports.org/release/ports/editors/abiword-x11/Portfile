# $Id: Portfile 44048 2008-12-20 02:36:47Z jmr@macports.org $

PortSystem 1.0

name		abiword-x11
version		2.6.5
description	A word processor with gnome support.
long_description        A word processor with gnome support.
maintainers	nomaintainer
categories	editors textproc gnome
platforms	darwin
homepage	http://www.abisource.com/
master_sites    \
	http://www.abisource.org/downloads/abiword/${version}/source \
	http://www.nl.abisource.com/downloads/abiword/${version}/source \
	http://distro.ibiblio.org/pub/linux/distributions/gentoo/distfiles
checksums	md5 edce76a1da515dfc102a0e030f722002 \
		sha1 f848e82bcda6b0ece5ce206b516a475af9aa5fa7 \
		rmd160 406c1dd6a84bfcf8111d39b23e0a4d3361eda87e
distname	abiword-${version}

patchfiles  patch-configure.diff

depends_lib	\
   	port:enchant \
   	port:expat \
   	port:fontconfig \
   	port:fribidi \
	port:gnome-platform-suite \
	port:ImageMagick \
	port:jpeg \
	port:libgnomeprintui \
	port:libiconv \
	port:libpng \
	port:popt \
	port:wv \
	port:zlib

configure.args	\
	--disable-Cocoa \
	--disable-Carbon \
	--mandir=${prefix}/share/man \
	--with-expat=${prefix} \
	--with-fribidi=${prefix} \
	--with-ImageMagick=${prefix} \
	--with-libiconv=${prefix} \
	--with-libjpeg-prefix=${prefix} \
	--with-libpng=${prefix} \
	--with-popt=${prefix} \
	--with-zlib=${prefix} \
	--without-epath \
	--enable-gnome

variant without_gnome description {Disable GNOME support} {
	configure.args-delete	--enable-gnome
	depends_lib-delete	\
		port:gnome-platform-suite \
		port:libgnomeprintui
}

platform darwin 9 {
	post-patch {
		reinplace "s|#define ICONV_CONST const|#define ICONV_CONST|g" ${worksrcpath}/src/af/util/xp/ut_iconv.cpp
	}
}
