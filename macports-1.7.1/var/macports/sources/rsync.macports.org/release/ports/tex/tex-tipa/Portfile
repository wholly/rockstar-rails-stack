# $Id: Portfile 37228 2008-05-31 14:10:38Z jmr@macports.org $

PortSystem			1.0
name            	tex-tipa
version         	1.3
revision			1
description     	Fonts and macros for IPA phonetics characters.
long_description	TIPA (TeX International Phonetic Alphabet) is a latex \
					package for International Phonetic Alphabet characters \
					by Rei Fukui, Hajime Kobayashi, and Shun Shirakawa
platforms       	darwin
categories      	tex print
maintainers     	pguyot@kallisys.net
homepage			http://www.essex.ac.uk/linguistics/clmt/latex4ling/tipa/
master_sites		ftp://ftp.jussieu.fr/pub/TeX/CTAN/fonts/ \
					http://ftp.nara.wide.ad.jp/pub/TeX/CTAN/fonts/
distname			tipa
use_zip				yes
dist_subdir			${name}/${version}
checksums			tipa.zip \
						md5 8e3cc71833f947f8c3f2cdcf86a798c5 \
						sha1 24a9a9b907affe93422812ee665d4dfbffc7daef \
						rmd160 3789e1ea95f649a9788055294bb1a39a0313692d
depends_lib			bin:mktexlsr:texlive
patchfiles			patch-tipa-1.3-Makefile

use_configure       no
build {}
destroot {
	system "cd ${worksrcpath}/tipa-${version}/ && make install DESTROOT=${destroot} PREFIX=${prefix}"

	file mkdir ${destroot}${prefix}/share/texmf-local/fonts/map/dvips/tipa
	file rename ${destroot}${prefix}/share/texmf-local/dvips/config/tipa.map \
		${destroot}${prefix}/share/texmf-local/fonts/map/dvips/tipa
}
post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/texmf-local/doc/tipa
	xinstall -m 644 -W ${worksrcpath} 00README tipaface.pdf tipaman.pdf tipaman.ps \
		${destroot}${prefix}/share/texmf-local/doc/tipa
}
post-activate {
	system "mktexlsr"
	ui_msg "\nBefore using tipa, please make sure to update font map files.\n"
	ui_msg "  \$ sudo updmap-sys --enable MixedMap tipa.map\n"
}
