# $Id: Portfile 37083 2008-05-26 16:05:31Z mmoll@macports.org $

PortSystem 1.0

name		optpp
version		2.4
categories	math
platforms	darwin
maintainers	mmoll

description	C++ library for non-linear optimization
long_description	\
	OPT++ is a C++ library for non-linear optimization.

homepage	http://csmr.ca.sandia.gov/projects/opt++/
distname	optpp-${version}
master_sites	${homepage}
extract.suffix .tar.gz
checksums	md5 7bd39f389c19ef16c3f62bc6ffa06234

patchfiles patch-acx_blas.m4.diff
use_autoconf yes
configure.ldflags	"-framework vecLib"
configure.args --includedir=${prefix}/include/OPT++ --with-blas

variant mpi description {builds with MPI support to enable parallel optimization} {
	configure.args-append --enable-mpi
	configure.env-append MPICC=${prefix}/lib/openmpi/bin/mpicc \
		  		 MPICXX=${prefix}/lib/openmpi/bin/mpic++ \
				 MPILIBS='-L${prefix}/lib'
	depends_lib port:openmpi
}
