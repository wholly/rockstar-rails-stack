# $Id: Portfile 48815 2009-03-29 15:26:23Z jmr@macports.org $
PortSystem      1.0
name            wxMaxima
version         0.8.1
maintainers     usami-k@yc5.so-net.ne.jp
platforms       darwin
categories      math aqua
description     Graphical user interface for Maxima
long_description \
                wxMaxima is a cross platform GUI for the computer algebra \
                system maxima based on wxWidgets.
homepage        http://wxmaxima.sourceforge.net/
master_sites    sourceforge:wxmaxima
checksums       md5 a50e7e78e022408fac61634c92bd2341 \
                sha1 8a332da2d5dc0013a20ce479c0ca0648060677b2
patchfiles      patch-src_main.cpp.diff

depends_lib     port:libiconv \
                port:libsdl \
                port:libxml2 \
                port:wxWidgets \
                port:zlib
depends_run     port:maxima

post-patch {
    reinplace "s|@@PREFIX@@|${prefix}|" ${worksrcpath}/src/main.cpp
}

configure.args  --enable-dnd --enable-printing --enable-unicode-glyphs
build.target-append wxMaxima.app

destroot {
    xinstall -m 755 -d ${destroot}${applications_dir}
    file copy ${worksrcpath}/wxMaxima.app ${destroot}${applications_dir}

    set docPath ${prefix}/share/doc/${name}
    xinstall -m 755 -d ${destroot}${docPath}
    foreach f { AUTHORS COPYING README } {
        xinstall -m 644 ${worksrcpath}/${f} ${destroot}${docPath}
    }
}

