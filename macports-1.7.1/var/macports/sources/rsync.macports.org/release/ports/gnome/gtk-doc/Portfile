# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 45530 2009-01-17 09:40:03Z devans@macports.org $

PortSystem      1.0

name            gtk-doc
version         1.11
categories      gnome devel
platforms       darwin freebsd linux
maintainers     nomaintainer
description     GTK+/GNOME API documentation generator

long_description \
    GTK-Doc generates API documentation from comments added to C code. \
    It is typically used to document the public API of GTK+  and GNOME \
    libraries, but it can also be used to document application code.

homepage        http://www.gtk.org/gtk-doc/
master_sites    gnome:sources/${name}/${version}/
use_bzip2       yes

checksums       md5     b5e268c71fa90aad890cf53715664d0a \
                sha1    685823e269cc08fdef50828b0a68697222877b1c \
                rmd160  802c61e4e2072f5e91fe65d6f40587313b7bd23b

depends_build   port:rarian \
                port:gnome-doc-utils \
                port:pkgconfig \
                port:docbook-xml-4.3 \
                port:docbook-xsl

depends_lib     port:libxml2 \
                path:bin/perl:perl5 \
                port:python25

configure.perl ${prefix}/bin/perl
configure.python ${prefix}/bin/python2.5
configure.args  --with-xml-catalog=${prefix}/etc/xml/catalog

# TODO Enable test support.

post-activate {
    ui_debug "Updating scrollkeeper database..."
    system "${prefix}/bin/scrollkeeper-update"
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/?C=M&O=D
livecheck.regex {(\d+(?:\.\d+)*)/}
