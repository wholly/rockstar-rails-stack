--- calendar/libical/src/libical/icaltz-util.c.orig	2008-12-22 02:49:23.000000000 -0700
+++ calendar/libical/src/libical/icaltz-util.c	2009-01-13 20:09:57.000000000 -0700
@@ -32,7 +32,8 @@
 #include <byteswap.h>
 #include <endian.h>
 #else
-#include <sys/endian.h>
+#define bswap32(val) ((((val) & 0x000000ffU) << 24) | (((val) & 0x0000ff00U) <<  8) | (((val) & 0x00ff0000U) >>  8) | (((val) & 0xff000000U) >> 24))
+#include <sys/types.h>
 #endif
 #include <limits.h>
 #include <time.h>
@@ -99,7 +100,7 @@
 #ifdef __linux__
         return bswap_32 (*(const int *) ptr);
 #else
-         return bswap32 (*(const uint32_t *) ptr);
+         return bswap32 (*(const u_int32_t *) ptr);
 #endif
 #endif
 	else
