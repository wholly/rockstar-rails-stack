--- eel/eel-gdk-extensions.c.orig	2008-11-01 15:40:46.000000000 +0100
+++ eel/eel-gdk-extensions.c	2008-11-01 15:53:11.000000000 +0100
@@ -33,7 +33,9 @@
 #include <gdk-pixbuf/gdk-pixbuf.h>
 #include <gdk/gdkprivate.h>
 #include <gdk/gdk.h>
+#ifndef GDK_WINDOWING_QUARTZ
 #include <gdk/gdkx.h>
+#endif
 #include <stdlib.h>
 #include <pango/pango.h>
 
@@ -581,13 +583,16 @@
 	 */
 	gdk_window_show (window);
 
+#ifndef GDK_WINDOWING_QUARTZ
 	/* If the window was already showing, it would not have
 	 * the focus at this point. Do a little X trickery to
 	 * ensure it is focused.
 	 */
 	eel_gdk_window_focus (window, GDK_CURRENT_TIME);
+#endif
 }
 
+#ifndef GDK_WINDOWING_QUARTZ
 void
 eel_gdk_window_focus (GdkWindow *window, guint32 timestamp)
 {
@@ -599,7 +604,9 @@
 	gdk_flush();
 	gdk_error_trap_pop ();
 }
+#endif
 
+#ifndef GDK_WINDOWING_QUARTZ
 void
 eel_gdk_window_set_wm_protocols (GdkWindow *window,
 				 GdkAtom *protocols,
@@ -619,7 +626,9 @@
 
 	g_free (atoms);
 }
+#endif
 
+#ifndef GDK_WINDOWING_QUARTZ
 /**
  * eel_gdk_window_set_wm_hints_input:
  * 
@@ -648,6 +657,7 @@
 	XSetWMHints (dpy, id, wm_hints);
 	XFree (wm_hints);
 }
+#endif
 
 void
 eel_gdk_window_set_invisible_cursor (GdkWindow *window)
@@ -676,6 +686,7 @@
 	g_object_unref (empty_bitmap);
 }
 
+#ifndef GDK_WINDOWING_QUARTZ
 EelGdkGeometryFlags
 eel_gdk_parse_geometry (const char *string, int *x_return, int *y_return,
 			     guint *width_return, guint *height_return)
@@ -714,6 +725,7 @@
 
 	return gdk_flags;
 }
+#endif
 
 void
 eel_gdk_draw_layout_with_drop_shadow (GdkDrawable         *drawable,
@@ -745,8 +757,10 @@
 eel_gdk_color_parse (const gchar *spec,
 		     GdkColor *color)
 {
+#ifndef GDK_WINDOWING_QUARTZ
 	Colormap xcolormap;
 	XColor xcolor;
+#endif
 
 	g_return_val_if_fail (spec != NULL, FALSE);
 	g_return_val_if_fail (color != NULL, FALSE);
@@ -756,6 +770,7 @@
 		return TRUE;
 	}
 
+#ifndef GDK_WINDOWING_QUARTZ
 	/* If that failed, fallback to the old gdk code. */
 	xcolormap = DefaultColormap (GDK_DISPLAY (),
 				     gdk_x11_get_default_screen ());
@@ -766,6 +781,7 @@
 		color->blue = xcolor.blue;
 		return TRUE;
 	}
+#endif
 
 	return FALSE;
 }
