# $Id: Portfile 29880 2007-10-14 12:38:59Z nox@macports.org $

PortSystem      1.0

name            python-mode.el
set my_name     [lindex [split ${name} .] 0]
version         1.0
categories      lang python editors
platforms       darwin
maintainers     nox
description     python-mode is an X/Emacs major mode for editing Python source code

long_description \
    Python-mode makes a number of editing and debugging features available to Python \
    programmers who use GNU Emacs or XEmacs. Included in its basic feature set are \
    syntax coloring, indent/dedent/electric newline support, movement across major \
    functional sections of code, code execution in inferior Python processes, \
    class/function marking, integration with pdb, the Python debugger.

homepage        http://python-mode.sourceforge.net/
master_sites    sourceforge:${my_name}

checksums       md5 57fde95d350e010b5a00d98b8ce4a066 \
                sha1 974a7714000238bd0423c5598d781c9987929b83 \
                rmd160 6f2abe80b7eae9123da10a3c0f447f7792caedb6

distname        ${my_name}-${version}

depends_build   port:emacs
depends_run     ${depends_build}

use_configure   no

build {
    system "cd ${worksrcpath} && \
        emacs --batch --eval \
            '(progn (setq load-path (cons \".\" load-path)) \
                (byte-compile-file \"doctest-mode.el\") \
                (byte-compile-file \"pycomplete.el\") \
                (byte-compile-file \"python-mode.el\"))'"
}

destroot {
    xinstall -d ${destroot}${prefix}/share/emacs/site-lisp
    eval xinstall -m 0644 [glob -directory ${worksrcpath} *.el *.elc] \
        ${destroot}${prefix}/share/emacs/site-lisp
}

universal_variant   no

livecheck.regex "<title>${my_name} v(.*) released.*</title>"

