# $Id: Portfile 48921 2009-03-31 11:36:56Z mww@macports.org $

PortSystem 1.0

name			ragel
version			6.4
categories		lang
platforms		darwin
maintainers		mww
description		ragel is a state machine compiler
long_description	Ragel compiles finite state machines from regular \
			languages into runnable C/C++ code. Ragel state \
			machines can not only recognize byte sequences as \
			regular expression machines do, but can also execute \
			code at arbitrary points in the recognition of a \
			regular language.

homepage		http://www.complang.org/ragel/
master_sites		${homepage}
checksums           md5     c0dc274083e9d825bfb48966810de046 \
                    sha1    480807c488a82d168f6a2527fa85035c37a68ba5 \
                    rmd160  a432fc93f8b107b43d323f389137cc609e061d01

depends_build	port:bison

post-build	{
	system "cd ${worksrcpath}/doc && ${build.cmd} ragel.1"
}

test.run		yes
test.dir		${worksrcpath}/test
test.target

destroot.destdir	prefix=${destroot}${prefix}
post-destroot {
	xinstall -m 644 ${worksrcpath}/doc/ragel.1 \
		${destroot}${prefix}/share/man/man1
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} COPYING CREDITS ChangeLog README TODO \
		${destroot}${prefix}/share/doc/${name}
}

livecheck.version	State Machine Compiler 6.4
