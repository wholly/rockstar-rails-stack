# $Id: Portfile 42270 2008-11-17 22:16:38Z gwright@macports.org $

PortSystem 1.0

name		hs-HTTP
set canonicalname	HTTP
version		3001.1.4
categories	devel haskell
maintainers	nomaintainer
platforms	darwin

description	Haskell client side HTTP library
long_description	\
		Haskell's HTTP package contains updated versions of	\
		Warrick Gray's excellent Haskell HTTP and Browser	\
		modules.

set hackage	http://hackage.haskell.org
homepage	http://www.haskell.org/http
master_sites	${hackage}/packages/archive/${canonicalname}/${version}
distname	${canonicalname}-${version}

checksums       md5     0ed9b7b8e24645e1a0223771863f2a5c		\
                sha1    e263405a923ebb0c39878fa973595cc7aba4f660	\
                rmd160  7b7ed6224f02eba13b53b1da409d23f92ac6484c

depends_build	port:ghc

configure	{ system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix} --with-compiler=${prefix}/bin/ghc --enable-library-profiling"
		}

build		{ system "cd ${worksrcpath} && runhaskell Setup build"
		}

destroot	{ system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
                  system "cd ${worksrcpath} && runhaskell Setup register   --gen-script"
                  system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                 }

post-activate	{ system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate	{ system "${prefix}/libexec/${name}/unregister.sh" }

