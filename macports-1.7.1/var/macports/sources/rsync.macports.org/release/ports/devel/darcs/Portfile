# $Id: Portfile 46323 2009-02-02 18:57:29Z gwright@macports.org $

PortSystem 1.0

name            darcs
version         2.2.0
revision	1
categories      devel
maintainers     gwright
description     David's Advanced Revision Control System
long_description \
                David's Advanced Revision Control System is yet		\
                another replacement for CVS. It is written in Haskell,	\
                and has been tested on Linux and Mac OS X. Darcs	\
                includes a cgi script, which can be used to view the	\
                contents of your repository.

homepage        http://darcs.net/
platforms       darwin
master_sites    ${homepage}

checksums	md5     8f0a5eba5971e7cf324c63664cde59e2		\
		sha1    a932ee14efc57490a4304958ab391ad7c86030f0	\
		rmd160  86186f0dc64580c099f815b511eb84ee6387b7b0

depends_build   port:ghc
depends_lib     port:curl	\
		port:ncurses	\
                port:gmp

patchfiles	patch-configure.diff

configure.args  --mandir=${prefix}/share/man	\
		--without-manual

test.run	yes
test.target	check

variant docs description {Generate a printable manual} {
		depends_build-append	port:latex2html

		configure.args-delete	--without-manual
		configure.args-append	--with-manual
}

variant profiling description {Build darcs with runtime profiling enabled} {
		configure.args-append	--enable-profile
		patchfiles-append	patch-GNUmakefile.diff
}

variant nolibcurl description {Build darcs without libcurl} {
		configure.args-append	--without-libcurl
		depends_lib-delete	port:curl
		depends_run-append	port:wget
}

