# $Id: Portfile 29000 2007-09-12 23:03:32Z nox@macports.org $

PortSystem      1.0
PortGroup       xcode 1.0

name            agsocket
set my_name     AGSocket
version         0.3
categories      devel framework
platforms       darwin
maintainers     nomaintainer
description     yet another BSD sockets framework for use in Cocoa applications

long_description \
    AGSocket is yet another BSD sockets framework for use in Cocoa applications. The primary class is \
    AGSocket, this can be used for TCP sockets, UDP sockets, raw sockets, whatever. Additionally several \
	socket address classes are included, notably AGInetSocketAddress for vanilla Internet socket \
    addresses. Unlike some of the other excellent sockets frameworks already available, AGSocket is \
    primarily designed for asynchronous I/O thanks to the underlying CFSocket API (though there's nothing \
    stopping you from using it for normal synchronous I/O if you are so inclined).

homepage        http://agkit.sourceforge.net/
master_sites    sourceforge:agkit
distname        ${my_name}-${version}
extract.suffix  .tgz

checksums       md5 6bc6840a84d8549774fb584db1ea8b2c \
                sha1 bbec9d15492a322d6604b8e8ea2c5d0520f3b850 \
                rmd160 204559b0c2f79e044d773d074e34bdc3204df15e

worksrcdir      ${my_name}

xcode.target        ${my_name}
xcode.destroot.type framework

variant universal {
    post-patch {
        set pbxproject ${worksrcpath}/${my_name}.pbproj/project.pbxproj

        reinplace -E "/OTHER_CFLAGS/s|\"\"|\"${configure.universal_cflags}\"|" ${pbxproject}
        reinplace -E "/OTHER_LDFLAGS/s|\"\"|\"${configure.universal_ldflags}\"|" ${pbxproject}
    }
}

livecheck.regex	"<title>${my_name} ${my_name}-(\\d+(?:\\.\\d+)*) released.*</title>"

