# $Id: Portfile 42271 2008-11-17 22:16:57Z gwright@macports.org $

PortSystem 1.0

name		hs-zlib
set canonicalname	zlib
version		0.5.0.0
categories	devel haskell
maintainers	nomaintainer
platforms	darwin

description	The Haskell Zlib Binding
long_description	\
		Haskell bindings to the Zlib library for compression \
                and decompression in gzip and zlib format.  The library \
		acts directly on ByteString values.

homepage	http://hackage.haskell.org
master_sites	${homepage}/packages/archive/${canonicalname}/${version}
distname	${canonicalname}-${version}

checksums       md5     22fa6d394c42c8584b234799b923f860		\
                sha1    4a93e727a408754baf6ede0ed721863eb4ea0df2	\
                rmd160  0ba0769d78b83b05726b15be55b10168db7d59bb

depends_build	port:ghc
depends_lib	port:zlib

configure	{ system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix} --enable-library-profiling --with-compiler=${prefix}/bin/ghc"
		}

build		{ system "cd ${worksrcpath} && runhaskell Setup build"
		}
destroot        { system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
	          system "cd ${worksrcpath} && runhaskell Setup register   --gen-script"
		  system "cd ${worksrcpath} && runhaskell 	Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                }

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

