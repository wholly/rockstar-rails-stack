# $Id: Portfile 38414 2008-07-19 06:02:02Z ryandesign@macports.org $

PortSystem 1.0

name                    fish
version                 1.23.0
categories              shells
platforms               darwin
maintainers             eridius@macports.org openmaintainer
description             user friendly command line shell for UNIX-like operating systems
long_description        fish is a user friendly command line shell for UNIX-like \
                        operating systems like Darwin.

homepage                http://www.fishshell.org/
master_sites            http://www.fishshell.org/files/${version}/
checksums               md5 aa2f09bb54652b16bf4f7708848a7416 \
                        sha1 8f2c4ca6b760dde5d4c4f8d745c97ce9e283879f
use_bzip2               yes

livecheck.check         regex
livecheck.regex         fish-(.*?).tar.bz2

depends_build   bin:doxygen:doxygen
depends_lib     lib:libiconv:libiconv lib:libncurses:ncurses lib:libintl:gettext

configure.args  --mandir=${prefix}/share/man --without-xsel

platform darwin {
    # there's something wonky about the libiconv headers installed by
    # macports that prevents autoconf from detecting libiconv, so i
    # have to fake it. See
    # <http://permalink.gmane.org/gmane.comp.shells.fish.user/1217>
    # for details.
    patchfiles-append   patch-configure.ac.diff
    post-configure {
        reinplace "s|LDFLAGS = |LDFLAGS= -liconv |g" "${worksrcpath}/Makefile"
    }
}

variant xsel description "enable xsel support, only appropriate for use within X11" {
    configure.args-delete --without-xsel
}
