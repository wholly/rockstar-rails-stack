# $Id: Portfile 50018 2009-04-22 14:39:04Z alakazam@macports.org $

PortSystem        1.0

name              php5-eaccelerator
version           0.9.5.3

categories        php www devel
platforms         darwin freebsd openbsd
maintainers       alakazam
homepage          http://eaccelerator.net/
description       php5 extension for PHP acceleration, optimization, and dynamic content caching
long_description \
    eAccelerator is a free open-source PHP accelerator, optimizer, and dynamic \
    content cache. It increases the performance of PHP scripts by caching them \
    in their compiled state, so that the overhead of compiling is almost \
    completely eliminated. It also optimizes scripts to speed up their \
    execution. eAccelerator typically reduces server load and increases the \
    speed of your PHP code by 1-10 times.

master_sites      http://bart.eaccelerator.net/source/${version}/
checksums         md5 caf797223739516882f870342f74b935 \
                  sha1 6671a105497f41c4e93e0b84da516b72df159fc5 \
                  rmd160 9da55beec18e7a36761b5556d3bb4d5292d21650
distname          eaccelerator-${version}
use_bzip2         yes
depends_lib       path:bin/phpize:php5
configure.args    --with-php-config=${prefix}/bin/php-config

pre-configure {
    system "cd ${worksrcpath}; phpize"
}

destroot.destdir INSTALL_ROOT=${destroot}

post-install {

    set ini_file          "${prefix}/etc/php.ini"
    set extension_file    "${prefix}/lib/php/extensions/no-debug-non-zts-20060613/eaccelerator.so"
    set eaccelerator_docs "http://eaccelerator.net/wiki/Settings"

    ui_msg "
    ***************************************************************************
    * To enable the eaccelerator extension in php, add or edit the following
    * lines in ${ini_file}:
    *
    * zend_extension=\"${extension_file}\"
    *
    * For more information and details about configuration settings, see
    * ${eaccelerator_docs}
    ***************************************************************************"
}

variant shared_memory description {Enable shared memory access functions [only enable in trusted environments]} {
    configure.args-append --with-eaccelerator-shared-memory
}

variant sessions description {Enable session handler [only enable in trusted environments]} {
    configure.args-append --with-eaccelerator-sessions
}

variant content_caching description {Enable content caching support [may be obsoleted in a future version of eAccelerator]} {
    configure.args-append --with-eaccelerator-content-caching
}

variant disassembler description {Include a disassembler} {
    configure.args-append --with-eaccelerator-disassembler
}

livecheck.check  regex
livecheck.url    ${homepage}
livecheck.regex  "Release-((\\d\\.?)+)"
