# $Id: Portfile 47934 2009-03-10 16:47:30Z jmr@macports.org $
PortSystem			1.0

name				pennmush
version				1.8.1p4
set branch			[join [lrange [split ${version} .] 0 1] .]
categories			games
maintainers			nomaintainer
description			The PennMUSH mud server
long_description	There are a number of flavors of MUSH server freely \
available to those who want to run their own MUSHes: TinyMUSH 3.0, \
TinyMUSH 2.2, TinyMUX 1.6, and PennMUSH 1.7.x. TinyMUSH uses a disk-based \
database, while PennMUSH keeps its database in the computer's memory \
(TinyMUX can do either). This makes PennMUSH suitable for computers which \
have plenty of memory or little disk space. From a user standpoint they \
offer many similar features and a very similar command parser.
homepage			http://www.pennmush.org/

master_sites		http://download.pennmush.org/Source/ \
					http://download.pennmush.org/Source/oldsrc/${branch}/
patchfiles			patch-Configure.diff patch-Makefile.SH.diff
checksums			md5 9078100d019bffa0aac2baeb0fa5f6e4
distname			pennmush
distfiles			pennmush-1.8.1p4${extract.suffix}

configure.cmd		sh Configure -d
configure.pre_args	{}

pre-build			{
	xinstall options.h.dist options.h
	
	xinstall game/mushcnf.dst game/mush.cnf
	xinstall game/aliascnf.dst game/alias.cnf
	xinstall game/restrictcnf.dst game/restrict.cnf
	
	reinplace "s|GAMEDIR=|GAMEDIR=${prefix}/pennmush|g" game/restart
}

destroot.destdir	GLOBAL_INSTALL=${destroot}${prefix}/pennmush
destroot.target		globalinstall
