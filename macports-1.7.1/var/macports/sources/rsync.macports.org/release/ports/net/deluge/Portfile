# $Id: Portfile 44729 2009-01-02 18:10:20Z jeremyhu@macports.org $

PortSystem 1.0
PortGroup python25 1.0

name		deluge
version		1.0.7
categories	net gnome python
maintainers nomaintainer
description	A GNOME BitTorrent client.
long_description \
	Deluge is a GNOME client for the BitTorrent network written in python.
homepage	http://www.deluge-torrent.org
platforms	darwin

master_sites	http://download.deluge-torrent.org/source/${version}/

checksums           md5     19f782970aedaa9f53b70699f3ee099a \
                    sha1    c601a0af4fd5c2fdf7b50eb6af2ddafcff58bfaa \
                    rmd160  b980ab82e67aabdbe180d32e8a1c5e175501fbd3

depends_build \
	port:py25-setuptools

depends_lib-append	\
	port:dbus-python25 \
	port:gettext \
	port:librsvg \
	port:py25-gtk \
	port:py25-hashlib \
	port:py25-setuptools \
	port:py25-xdg \
	port:py25-zlib \
	port:boost

#patchfiles  patch-setup.py.diff

configure.cflags-append	-I${prefix}/include/boost
configure.cppflags-append -I${prefix}/include/boost
build.env	\
	PYTHON_CFLAGS="-I${prefix}/include -I${prefix}/include/boost" \
	PYTHON_LDFLAGS=-L${prefix}/lib \
	CFLAGS="-I${prefix}/include -I${prefix}/include/boost"

pre-configure {
	if { ![file exists ${prefix}/lib/libboost_python-mt.dylib] } {
		ui_error "You must build boost with the python25 variant"
		error "You must build boost with the python25 variant"
	}
}
