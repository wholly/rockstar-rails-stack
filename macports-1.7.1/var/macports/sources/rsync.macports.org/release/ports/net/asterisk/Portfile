# $Id: Portfile 37263 2008-06-01 22:06:23Z mr_bond@macports.org $

PortSystem			1.0

name				asterisk
version				1.4.20.1
categories			net
platforms			darwin
maintainers			viagente.ca:marc.blanchet mr_bond openmaintainer

description			An Open Source PBX and telephony toolkit
long_description	Asterisk is an open source PBX and telephony toolkit.  It \
					provides the ability to develop telephony applications on top of internet \
					telephony (Voice over IP) as well as traditional telephony connectivity (PSTN).
				
homepage			http://www.asterisk.org
master_sites		http://downloads.digium.com/pub/asterisk/releases/
					
depends_lib			port:ncurses \
					port:openssl \
					port:zlib \
					port:bison \
					port:curl \
					port:wget
					
checksums			md5  4e4c0cdd97cb0f7b007d4f773222a2a9 \
					sha1  402c06fdf5171bdeec90f0a456f5582230c64284 \
					rmd160 3bc932cb68538cd16d214f87d9e06a6b84ea7968

configure.args		--localstatedir=${prefix}/var --sysconfdir=${prefix}/etc/asterisk \
					--without-h323 --without-zaptel

build.env			ASTCFLAGS=-I${prefix}/include \
					ASTLDFLAGS=-L${prefix}/lib

post-destroot {
	system "rsync -a $worksrcpath/configs/*.sample ${destroot}/${prefix}/etc/asterisk"
	file mkdir "${destroot}/${prefix}/var/run"
	file mkdir "${destroot}/${prefix}/var/log/asterisk"
}
