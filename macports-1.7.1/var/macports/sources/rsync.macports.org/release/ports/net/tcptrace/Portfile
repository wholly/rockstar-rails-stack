# $Id: Portfile 36107 2008-04-18 05:56:36Z fenner@macports.org $

PortSystem       1.0

name             tcptrace
version          6.6.7
categories       net
maintainers      fenner@macports.org
description      A TCP dump file analysis tool
long_description \
    tcptrace a TCP dump file analysis tool written by Shawn Ostermann at \
    Ohio University. It is NOT a packet capture program. It reads output \
    dump files in the formats of several popular packet capturing \
    programs: tcpdump, snoop, etherpeek, and netm.  It can also output \
    (ie, convert thus converting to) tcpdump format files.
homepage         http://tcptrace.org/
platforms        darwin
master_sites     ${homepage}download/
checksums        md5     68128dc1817b866475e2f048e158f5b9 \
                 sha1    ae4d10a0829c57f2eda17e63f593e558f52b7f24 \
                 rmd160  1dd0f373f766322343ffad59d0655eba4c6682e0
depends_lib      lib:libpcap:libpcap

post-configure {
    set path "${worksrcpath}"
    reinplace "s|PCAP_INCS    = -I/usr/local/include -I. -I../pcap -I/usr/include/pcap|PCAP_INCS    = -I${prefix}/include|" "${path}/Makefile"
    reinplace "s|PCAP_LDFLAGS = -L/usr/local/lib -Llib -Lpcap -L../pcap -L./cygwin-libs|PCAP_LDFLAGS = -L${prefix}/lib|" "${path}/Makefile"
}

destroot {
    file mkdir ${destroot}${prefix}/bin
    foreach f {tcptrace xpl2gpl} {
	xinstall -m 555 ${worksrcpath}/$f ${destroot}${prefix}/bin/
    }
    file mkdir ${destroot}${prefix}/share/man/man1
    xinstall -m 444 ${worksrcpath}/tcptrace.man ${destroot}${prefix}/share/man/man1/tcptrace.1
    file mkdir ${destroot}${prefix}/share/doc/tcptrace
    foreach f {ARGS COPYING COPYRIGHT README README.mailing_list
		README.modules README.pcap README.tline_graphs
		README.tput_graphs README.version README.xpl2gpl
		THANKS WWW} {
	xinstall -m 444 ${worksrcpath}/$f ${destroot}${prefix}/share/doc/tcptrace/
    }
}
