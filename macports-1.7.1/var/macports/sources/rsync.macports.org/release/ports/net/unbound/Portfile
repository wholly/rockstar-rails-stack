# $Id: Portfile 48920 2009-03-31 11:28:38Z ryandesign@macports.org $

PortSystem 1.0

name			unbound
version			1.2.1
categories		net
maintainers		macports.org:snc \
				macports.org:deric
description		Validating, recursive, and caching DNS resolver.
homepage		http://www.unbound.net/
platforms		darwin

set	unbounduser		unbound
set	unboundgroup	unbound

long_description	Unbound is a validating, recursive, and caching DNS \
					server software product from NLnet Labs, VeriSign Inc.,\
					Nominet, and Kirei. It is distributed free of charge \
					in open source form under the BSD license.\
					Unbound is designed as a set of modular components \
					that incorporate modern features, such as enhanced \
					security (DNSSEC) validation, Internet Protocol \
					Version 6 (IPv6), and a client resolver library API \
					as an integral part of the architecture.

master_sites		http://unbound.net/downloads/

checksums			md5 5437f2a1e698d8aa73ba19a60662a654 \
					sha1 996aea210b24f8c4bd1aa7a9584bc5b70b989b1b \
					rmd160 c26d82d92e3342fe860d342a0717824b07d1c38d

post-destroot {
		addgroup ${unboundgroup}
		set gid [existsgroup ${unboundgroup}]
		adduser ${unbounduser} shell=/sbin/nologin gid=${gid} \
				home=/dev/null \
				realname=Unbound\ Resolver
}

# Make it run on boot
startupitem.create	yes
startupitem.name	unbound
startupitem.start	${prefix}/sbin/unbound
startupitem.stop	"/bin/kill \$(cat ${prefix}/etc/unbound/unbound.pid)"
