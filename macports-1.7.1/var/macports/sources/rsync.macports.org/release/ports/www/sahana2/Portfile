# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 48920 2009-03-31 11:28:38Z ryandesign@macports.org $

PortSystem          1.0

name                sahana2
version             0.6.2
categories          www php
maintainers         snc openmaintainer
description         Sahana is a web based disaster management system
long_description    Sahana is an integrated set of pluggable, web based \
                    disaster management applications that provide solutions to \
                    large-scale humanitarian problems in the aftermath of a \
                    disaster.

homepage            http://www.sahana.lk
master_sites        sourceforge:sahana
distname            sahana-${version}-stable
checksums           md5 618c3ef5a44720f5b417b3023a8b814e \
                    sha1 b75571ad68e684b420091578bd0e06ccda25d14d \
                    rmd160 3aa1803405ad0d0414658c51342247d74d8bf9d1

platforms           darwin freebsd

depends_lib         port:apache2 port:php5 port:mysql5
            
variant apache description "Use Apache 1 instead of Apache 2" {
    depends_lib-append  port:apache
    depends_lib-delete  port:apache2
}

variant mysql4 description "Use MySQL 4 instead of MySQL 5" {
    depends_lib-append  port:mysql4
    depends_lib-delete  port:mysql5
}

use_configure   no
build           {}

set docpath ${destroot}${prefix}/www/data
set worksrcpath ${workpath}/sahana

destroot {
    xinstall -d -m 0755 ${docpath}/sahana
    eval file copy [glob ${worksrcpath}/*] ${docpath}/sahana
    file attributes ${docpath}/sahana/www/tmp -permissions 040777
}

