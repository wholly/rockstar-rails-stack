# $Id: Portfile 38957 2008-08-04 06:08:57Z wsiegrist@apple.com $

PortSystem 1.0

name			mediawiki
set major_version	1.12
version			${major_version}.0
categories		www php
maintainers		nomaintainer
description		The wiki engine used by Wikipedia
long_description	MediaWiki is the collaborative editing software that runs Wikipedia, \
				the free encyclopedia, and other projects. It's designed to \
				handle a large number of users and pages without imposing too \
				rigid a structure or workflow.

homepage		http://www.mediawiki.org
distname		mediawiki-${version}
master_sites		http://download.wikimedia.org/mediawiki/${major_version}/
checksums               md5     117a1360f440883a51f0ebca32906ea0 \
                        sha1    48bf1877f60c317cbe93c072187dfe9c1aa3b857 \
                        rmd160  d4a4bd5b18345623c83aa368f6e5912d87d3589b
platforms		darwin freebsd

depends_run \
	port:libiconv \
	port:jpeg \
	port:jasper \
	port:tiff \
	port:lcms \
	port:libpng \
	port:freetype \
	port:libxml2 \
	port:jbigkit \
	port:expat \
	port:fontconfig \
	port:ghostscript \
	port:ImageMagick \
	port:pkgconfig \
	port:aspell

depends_lib \
	port:php5 \
	port:mysql5

variant php4 description "use php4 instead of php5" {
	depends_lib-append      port:php4
	depends_lib-delete	port:php5
}

variant mysql4 description "use mysql4 instead of mysql5" {
	depends_lib-append	port:mysql4
	depends_lib-delete	port:mysql5
}

use_configure   no
build			{}

set docpath ${destroot}${prefix}/www/data

destroot {
	xinstall -d -m 0755 ${docpath}/mediawiki
	eval file copy [glob ${worksrcpath}/*] ${docpath}/mediawiki
}
