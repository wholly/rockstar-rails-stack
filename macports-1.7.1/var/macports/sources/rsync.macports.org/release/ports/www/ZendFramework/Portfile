# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 48920 2009-03-31 11:28:38Z ryandesign@macports.org $

PortSystem          1.0

name                ZendFramework
version             1.7.4
categories          www lang
maintainers         snc openmaintainer
platforms           darwin freebsd
description         A framework for developing PHP web applications
long_description    This is a port of the Zend Framework. The Zend Framework \
                    aims to provide an architecture for developing entire \
                    applications with no other library dependencies. This code \
                    will always be actively developed, tested, and supported \
                    by Zend and the PHP Collaboration Project.
                  
homepage            http://framework.zend.com/
master_sites        http://framework.zend.com/releases/${name}-${version}/
checksums           md5 5240444dc2b0af50086ba6b3b9ee285e \
                    sha1 33872a606a2a92b607f96baa65640931b9acc13e \
                    rmd160 9f9764ac2a85e49062da4f2d6dc538deab3ec32b

set zf_doc_dir      ${prefix}/share/doc/${name}
set zf_lib_dir      ${prefix}/lib/${name}
use_configure       no
build               {}
destroot {
    # create paths
    xinstall -d -m 755 ${destroot}${zf_lib_dir}
    xinstall -d -m 755 ${destroot}${zf_doc_dir}

    # most files stay in doc - so this is our first target
    eval file copy [glob ${worksrcpath}/*] ${destroot}${zf_doc_dir}
       
    # now move real lib paths to lib
    file rename ${destroot}${zf_doc_dir}/library ${destroot}${zf_lib_dir}
    file rename ${destroot}${zf_doc_dir}/incubator ${destroot}${zf_lib_dir}
}

post-install {
    ui_msg "\nIf this is your first install, you might want to add"
    ui_msg "'${zf_lib_dir}/library' to include_path in your php.ini."
    ui_msg "i.e.: include_path = \".:${zf_lib_dir}/library\""
    ui_msg "\nIf you also want to use incubator components you'd have to"
    ui_msg "add '${zf_lib_dir}/incubator' too."
}

