# $Id: Portfile 49768 2009-04-17 18:00:29Z alakazam@macports.org $

PortSystem 1.0
name              php5-xdebug
version           2.0.3

categories        www net devel
platforms         darwin freebsd openbsd
maintainers       emory.smith@gmail.com openmaintainer
homepage          http://www.xdebug.org/index.php
description       php5 extension for php debugging
long_description \
    Xdebug is a php extension that helps you debug your scripts. It \
    provides valuable debug information, including error stack traces and \
    memory allocation summaries.  It can generate profiling information \
    about your php scripts, to be used for script execution analysis and \
    optimization. It also supports debugging interactively using the dbg \
    debug client.

master_sites      http://www.xdebug.org/files/
checksums         md5 0735584168c8c9f111252128d0076d7c \
                  sha1 fb172b0a48203759facd499f6825527c6112e275 \
                  rmd160 e34dc1cb9c86d59bad18f8ef39c15f540c99f183
distname          xdebug-${version}
extract.suffix    .tgz
depends_lib       path:bin/phpize:php5
configure.args    --enable-xdebug --with-php-config=${prefix}/bin/php-config

pre-configure {
    system "cd ${worksrcpath}; ${prefix}/bin/phpize"
}

destroot.destdir INSTALL_ROOT=${destroot}

post-install {

    set ini_file       "${prefix}/etc/php.ini"
    set extension_file "${prefix}/lib/php/extensions/no-debug-non-zts-20060613/xdebug.so"
    set xdebug_docs    "http://www.xdebug.org/docs/"

    ui_msg "
    ***************************************************************************
    * To enable the xdebug extension in php, add or edit the following
    * lines in ${ini_file}:
    *
    * zend_extension=\"${extension_file}\"
    *
    * Once the extension is installed, you can get a list of the available
    * configuration settings with the following command:
    *
    * % php --ri xdebug
    *
    * For more information and details about configuration settings, see
    * ${xdebug_docs}
    ***************************************************************************"
}

livecheck.check regex
livecheck.regex {Xdebug (\d+(\.\d+)*)}
