# $Id: Portfile 45403 2009-01-15 17:10:46Z jmr@macports.org $
PortSystem      1.0
PortGroup       python25 1.0
name            rdiff-backup
version         1.2.2
categories-append   net sysutils
maintainers     nomaintainer
description     backs up one directory to another, possibly over a network
long_description    rdiff-backup backs up one directory to another, \
                    possibly over a network. The target directory ends \
                    up a copy of the source directory, but extra reverse \
                    diffs are stored in a special subdirectory of that \
                    target directory, so you can still recover files \
                    lost some time ago. The idea is to combine the best \
                    features of a mirror and an incremental backup. \
                    rdiff-backup also preserves subdirectories, hard \
                    links, dev files, permissions, uid/gid ownership, \
                    and modification times. Also, rdiff-backup can \
                    operate in a bandwidth efficient manner over a pipe, \
                    like rsync. Thus you can use rdiff-backup and ssh to \
                    securely back a hard drive up to a remote location, \
                    and only the differences will be transmitted. \
                    Finally, rdiff-backup is easy to use and settings \
                    have sensical defaults.
homepage        http://www.nongnu.org/rdiff-backup/
master_sites    http://savannah.nongnu.org/download/rdiff-backup/
distname        rdiff-backup-${version}
checksums       md5 b9141e541c1885e858da5c41101aba78 \
                sha1 79e17d27475044c116d10a08cfe46816f74fce85 \
                rmd160 79ce59aecd0a58ac2fff4bb8c34d5fc35f721fc9
platforms       darwin

depends_lib-append  port:librsync \
                    port:py25-hashlib \
                    port:py25-xattr \
                    port:py25-zlib

patchfiles      patch-setup.py \
                patch-rdiff-backup.1
post-patch {
    reinplace "s|@PREFIX@|${prefix}|" ${worksrcpath}/rdiff-backup.1
}

build.args      --librsync-dir=${prefix}

