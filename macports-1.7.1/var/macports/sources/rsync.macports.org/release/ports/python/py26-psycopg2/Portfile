# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 47927 2009-03-10 13:48:11Z snc@macports.org $

PortSystem          1.0
PortGroup           python26 1.0

name                py26-psycopg2
version             2.0.9
categories-append   databases
maintainers         snc openmaintainer
description         A python DBAPI-2.0 ompliant database adapter for postgresql
long_description    Psycopg2 is a postgresql database adapter for python. \
                    It's fully compliant to pythons DBAPI-2.0. psycopg is \
                    designed for heavily multi-threaded applications \
                    featuring connection pooling.
homepage            http://www.initd.org/software/initd/psycopg/

platforms           darwin freebsd
depends_lib-append  port:openssl

distname            psycopg2-${version}
master_sites        http://initd.org/pub/software/psycopg/

checksums           md5 885e5bd372afafd14cfd914b000462e7 \
                    sha1 d6aca4b96b69207a795934623de60e9c9ce32378 \
                    rmd160 3194fbae1c69a3734e4db91e21db4b688de1d630

patchfiles          patch-setup.cfg.diff


if {![variant_isset postgresql82] && ![variant_isset postgresql83]} {
    default_variants    +postgresql83
}

variant postgresql82 conflicts postgresql83 description "Build using postgresql v8.2" {
    depends_lib-append  port:postgresql82
    
    post-patch {
        reinplace \
            s|@PG_CONFIG@|${prefix}/lib/postgresql82/bin/pg_config|g \
            ${worksrcpath}/setup.cfg
    }
}

variant postgresql83 conflicts postgresql82 description "Build using postgresql v8.3" {
    depends_lib-append port:postgresql83
    
    post-patch {
        reinplace \
            s|@PG_CONFIG@|${prefix}/lib/postgresql83/bin/pg_config|g \
            ${worksrcpath}/setup.cfg
    }
}
