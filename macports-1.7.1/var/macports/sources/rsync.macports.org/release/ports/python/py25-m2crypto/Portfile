# $Id: Portfile 48546 2009-03-24 20:46:25Z jmr@macports.org $

PortSystem			1.0
PortGroup               python25 1.0

name                    py25-m2crypto
version                 0.19.1
categories-append		crypto devel
maintainers			nomaintainer
description			M2Crypto is a crypto and SSL toolkit for Python.
long_description		${description}

platforms			darwin

homepage			http://chandlerproject.org/Projects/MeTooCrypto
master_sites            http://pypi.python.org/packages/source/M/M2Crypto/
distname                M2Crypto-${version}

checksums               md5 c92286fdf0a75f017e72122c2832d5ff \
                        sha1 e1c0bc6c006c95a52c60c1ecd8f2e6a1af5fb967 \
                        rmd160 b28c2082a55e7dfcf242ed19f68052114dea5aec

depends_lib-append      bin:swig:swig \
                        port:openssl \
                        port:py25-setuptools

post-patch {
    reinplace "s|#extra_link_args|extra_link_args|g" \
        ${worksrcpath}/setup.py
    reinplace "s|self.openssl = '/usr'|self.openssl = '${prefix}'|g" \
        ${worksrcpath}/setup.py
}

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	eval file copy [glob ${worksrcpath}/doc/*] \
		${destroot}${prefix}/share/doc/${name}
}

livecheck.check		regex
livecheck.url		${homepage}
livecheck.regex         M2Crypto-(\[0-9\\.\]+)\.tar\.gz
