# $Id: Portfile 46702 2009-02-10 22:14:45Z blb@macports.org $

PortSystem 1.0

name       djvulibre
version    3.5.21
categories      graphics www
platforms       darwin
maintainers     nomaintainer

description     Web centric format and software platform for distributing documents and images.
long_description            DjVu can advantageously replace PDF, PS, TIFF,JPEG, and GIF for \
                            distributing scanned documents, digital documents, or high-resolution \
                            pictures. DjVu content downloads faster, displays and renders faster, \
                            looks nicer on a screen and consume less client resources than competing \
                            formats.

homepage        http://djvu.sourceforge.net/
master_sites    sourceforge:djvu
checksums           md5     4c6f3eb03ffbd067b6d2fe2344b0d9ad \
                    sha1    a6ef5cb1445baa333883754c703abd75cc5b34f6 \
                    rmd160  2163b784d705cc7b55bb3d9c9eb85edec44f28a7
                    
depends_lib     port:libiconv \
		        port:jpeg \
                port:tiff \
                port:libpng \
		        port:zlib

configure.args	--mandir=${prefix}/share/man \
		--enable-threads \
		--enable-shared \
		--enable-xmltools \
		--disable-djview
		
patchfiles		patch-djvulibre.diff
patch.pre_args	-p1

variant djview3 description {Build the (outdated) djview3 viewer. The newer QT4-based viewer called 'djview4' is now a separate package called 'djview'.} {
    depends_lib-append          port:qt3
    configure.args-delete       --disable-djview
    configure.args-append       --with-qt=${prefix}/lib/qt3
    configure.ldflags-append    "-dylib_file /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib"
}

