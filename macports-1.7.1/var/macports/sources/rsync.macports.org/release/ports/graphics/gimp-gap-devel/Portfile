# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 48084 2009-03-14 05:31:05Z devans@macports.org $

PortSystem 1.0

name            gimp-gap-devel
set svn_rev     820
version         2.5.0.${svn_rev}
categories      graphics
maintainers     devans

description     The Gimp Animation Package.

long_description \
                GIMP-GAP, the GIMP Animation Package, is a collection of plug-ins to \
                extend GIMP with capabilities to edit and create animations as \
                sequences of single frames. This is the unstable development branch \
                leading up to stable version 2.6 scheduled for release in April 2009.

universal_variant  no

homepage        http://www.gimp.org/
platforms       darwin

fetch.type      svn
svn.url         http://svn.gnome.org/svn/gimp-gap/trunk ${worksrcdir}
svn.tag         ${svn_rev}

depends_build   port:pkgconfig \
                port:gmake

depends_lib     port:gimp2 \
                port:faac \
                port:faad2 \
                port:x264 \
                port:lame \
                port:XviD

depends_run     port:MPlayer

patchfiles      patch-configure.in.diff \
                patch-extern_libs-Makefile.am.diff

pre-configure {
    reinplace "s|--enable-shared|--prefix=${prefix} --extra-cflags=-I${prefix}/include --extra-ldflags=-L${prefix}/lib --enable-shared|" \
       ${worksrcpath}/extern_libs/configure_options_ffmpeg.txt
}

configure.cmd    ./autogen.sh

configure.args  --disable-audio-support \
                --disable-libmpeg3 \
                --enable-gdkpixbuf-pview

post-destroot {
    foreach dir {howto reference} {
        xinstall -d ${destroot}${prefix}/share/${name}/$dir
        foreach txt [glob -d ${worksrcpath}/docs/$dir/txt *.txt] {
            xinstall -m 644 $txt ${destroot}${prefix}/share/${name}/$dir
        }
    }
}

livecheck.check none
