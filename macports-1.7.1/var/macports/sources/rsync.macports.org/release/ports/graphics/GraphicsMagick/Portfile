# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 44356 2008-12-27 02:00:45Z macsforever2000@macports.org $

PortSystem 1.0

name			GraphicsMagick
version			1.3.3
set branch		[join [lrange [split ${version} .] 0 1] .]
categories		graphics
platforms		darwin
maintainers		nomaintainer
description		image processing tools collection
long_description	GraphicsMagick is the swiss army knife of image \
				processing. It provides a robust collection of tools and \
				libraries which support reading, writing, and manipulating an \
				image in over 88 major formats including important formats \
				like DPX, GIF, JPEG, JPEG-2000, PNG, PDF, SVG, and TIFF.

homepage		http://www.graphicsmagick.org/
master_sites	sourceforge:graphicsmagick \
				ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/${branch}/

checksums               md5     3a016d97f012a3d691253a0c824dcded \
                        sha1    b49f8b2b3e0cd428d6e9fccd346fd5db27a358d3 \
                        rmd160  4616e204b73a9ed1423c2cca3537d4b32d996ee7

use_bzip2		yes
use_parallel_build	yes

depends_lib		port:libxml2 port:bzip2 port:zlib port:libpng port:tiff \
				port:freetype port:libiconv port:jpeg

configure.args	--with-jbig=no --with-wmf=no --with-dps=no \
				--with-lcms=no --with-x=no --with-perl=no \
				--with-trio=no --with-jp2=no --with-fpx=no \
				--with-png=yes --with-tiff=yes --with-bzlib=yes \
				--with-zlib=yes --with-xml=yes --with-ttf=yes \
				--enable-shared=yes --mandir=${prefix}/share/man

test.run		yes
test.target		check

variant q8 conflicts q16 q32 description {Use 8 bits per pixel quantum (default)} {
				configure.args-append --with-quantum-depth=8
}

variant q16 conflicts q8 q32 description {Use 16 bits per pixel quantum} {
				configure.args-append --with-quantum-depth=16
}

variant q32 conflicts q8 q16 description {Use 32 bits per pixel quantum} {
				configure.args-append --with-quantum-depth=32
}

if {![variant_isset q16] && ![variant_isset q32]} {
				default_variants +q8
}
