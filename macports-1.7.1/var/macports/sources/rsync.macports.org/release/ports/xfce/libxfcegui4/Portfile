# $Id: Portfile 50012 2009-04-22 06:31:49Z afb@macports.org $

PortSystem 1.0

name		libxfcegui4
version		4.6.1
categories	xfce
platforms	darwin
maintainers	afb@macports.org
description	various gtk widgets for xfce
long_description ${description}
homepage	http://www.xfce.org/
master_sites	http://www.ca-us.xfce.org/archive/xfce-${version}/src/
use_bzip2	yes
checksums	md5 539cff747634b8ee6f0d2362ee78a286 \
		sha1 82bcfe74dd3b9188b9f41d8fa7dc4a8481461696 \
		rmd160 295263f3e8a6bbcea05ce5ae8ab0f3a9cf1e4568

configure.args	--enable-startup-notification

depends_lib	port:libxfce4util \
		port:xfconf \
		port:libglade2 \
		port:gtk-xfce-engine \
		port:libxml2 \
		port:startup-notification

# AC_X_PATH blindly asks xmkmf where X11 is, and it always uses /usr/X11R6.
# This block helps us link correctly and setup our pc files correctly when we   
# are +system_x11 and x11prefix is somewhere non-standard and should cause
# AC_X_PATH to let us setup our CPPFLAGS and LDFLAGS without interference
configure.args-append --x-include=${prefix}/include --x-lib=${prefix}/lib
if { ![file exists ${prefix}/lib/pkgconfig/x11.pc] } {
    pre-configure {
        configure.cppflags-append -I${x11prefix}/include
        configure.ldflags-append  -L${x11prefix}/lib
    }

    # And this will similarly get ports that use pkgconfig to find our pkgconfig-less libX11
    post-destroot {
        if {![file exists ${x11prefix}/lib/pkgconfig/x11.pc]} {
            foreach pc [glob ${destroot}${prefix}/lib/pkgconfig/*.pc] {
                reinplace "s:-lX11:-L${prefix}/lib -L${x11prefix}/lib -lX11:g" ${pc}
            }
        }
    }
}

