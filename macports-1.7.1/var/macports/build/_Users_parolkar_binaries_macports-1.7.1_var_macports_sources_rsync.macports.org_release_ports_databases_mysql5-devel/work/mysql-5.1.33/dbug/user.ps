%!PS-Adobe-3.0
%%Creator: groff version 1.19.2
%%CreationDate: Thu Apr 23 13:53:43 2009
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%+ font Courier
%%DocumentSuppliedResources: procset grops 1.19 2
%%Pages: 21
%%PageOrder: Ascend
%%DocumentMedia: Default 595 842 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 2
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 595 842 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Times-Roman
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 841.89 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron
/Zcaron/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Bold@0 SF 3(DBUG)263.502 93.37 S 3(CP)204.798 113.37 S
-.216(ro)-3 G(gram Deb).216 E(ugging P)-.24 E(ackage)-.12 E(by)279
133.37 Q/F1 11/Times-Italic@0 SF -1.947 -.605(Fr e)264.243 152.37 T 2.75
(dF).605 G(ish)-3.245 E/F2 10/Times-Roman@0 SF 2.5(-1-)277.006 768 S 0
Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(INTR)69.336 96 Q
(ODUCTION)-.3 E F0 3.445(Almost e)94.336 126 R -.15(ve)-.25 G 3.445
(ry program de).15 F -.15(ve)-.25 G 3.444(lopment en).15 F 3.444
(vironment w)-.4 F(orth)-.1 E 5.944(yo)-.05 G 5.944(ft)-5.944 G 3.444
(he name pro)-5.944 F 3.444(vides some sort of)-.15 F(deb)69.336 138 Q
.768(ugging f)-.2 F(acility)-.1 E 5.768(.U)-.65 G .768(sually this tak)
-5.768 F .769
(es the form of a program which is capable of controlling e)-.1 F -.15
(xe)-.15 G .769(cution of).15 F .113(other programs and e)69.336 150 R
.113(xamining the internal state of other e)-.15 F -.15(xe)-.15 G .113
(cuting programs.).15 F .112(These types of programs will)5.112 F .517
(be referred to as e)69.336 162 R .517(xternal deb)-.15 F .517
(uggers since the deb)-.2 F .517(ugger is not part of the e)-.2 F -.15
(xe)-.15 G .517(cuting program.).15 F .518(Examples of)5.517 F
(this type of deb)69.336 174 Q(ugger include the)-.2 E F1(adb)2.5 E F0
(and)2.5 E F1(sdb)2.5 E F0(deb)2.5 E(uggers pro)-.2 E(vided with the)
-.15 E F1(UNIX)2.5 E/F2 7/Times-Bold@0 SF(1)-4 I F0(operating system.)
2.5 4 M 1.706(One of the problems associated with de)94.336 204 R -.15
(ve)-.25 G 1.705(loping programs in an en).15 F 1.705
(vironment with good e)-.4 F(xternal)-.15 E(deb)69.336 216 Q .394
(uggers is that de)-.2 F -.15(ve)-.25 G .394(loped programs tend to ha)
.15 F .694 -.15(ve l)-.2 H .394(ittle or no internal instrumentation.)
.15 F .395(This is usually not)5.395 F 5.118(ap)69.336 228 S 2.618
(roblem for the de)-5.118 F -.15(ve)-.25 G 2.618
(loper since he is, or at least should be, intimately f).15 F 2.617
(amiliar with the internal)-.1 F(or)69.336 240 Q -.05(ga)-.18 G .658
(nization, data structures, and control \215o).05 F 3.158(wo)-.25 G
3.158(ft)-3.158 G .658(he program being deb)-3.158 F 3.158(ugged. It)-.2
F .658(is a serious problem for)3.158 F .864
(maintenance programmers, who are unlik)69.336 252 R .864(ely to ha)-.1
F 1.164 -.15(ve s)-.2 H .864(uch f).15 F .864
(amiliarity with the program being maintained,)-.1 F .248
(modi\214ed, or ported to another en)69.336 264 R 2.749(vironment. It)
-.4 F .249(is also a problem, e)2.749 F -.15(ve)-.25 G 2.749(nf).15 G
.249(or the de)-2.749 F -.15(ve)-.25 G(loper).15 E 2.749(,w)-.4 G .249
(hen the program)-2.749 F(is mo)69.336 276 Q -.15(ve)-.15 G 2.5(dt).15 G
2.5(oa)-2.5 G 2.5(ne)-2.5 G -.4(nv)-2.5 G(ironment with a primiti).4 E
.3 -.15(ve o)-.25 H 2.5(ru).15 G(nf)-2.5 E(amiliar deb)-.1 E(ugger)-.2 E
2.5(,o)-.4 G 2.5(re)-2.5 G -.15(ve)-2.75 G 2.5(nn).15 G 2.5(od)-2.5 G
(eb)-2.5 E(ugger)-.2 E(.)-.55 E 2.768(On the other hand,)94.336 306 R/F3
10/Times-Italic@0 SF(db)5.268 E(ug)-.2 E F0 2.767(is an e)5.268 F 2.767
(xample of an internal deb)-.15 F(ugger)-.2 E 7.767(.B)-.55 G 2.767
(ecause it requires internal)-7.767 F 1.042
(instrumentation of a program, and its usage does not depend on an)
69.336 318 R 3.543(ys)-.15 G 1.043(pecial capabilities of the e)-3.543 F
-.15(xe)-.15 G(cution).15 E(en)69.336 330 Q .284(vironment, it is al)-.4
F -.1(wa)-.1 G .284(ys a).1 F -.25(va)-.2 G .284(ilable and will e).25 F
-.15(xe)-.15 G .284(cute in an).15 F 2.784(ye)-.15 G -.4(nv)-2.784 G
.283(ironment that the program itself will e).4 F -.15(xe)-.15 G(cute)
.15 E 2.921(in. In)69.336 342 R .421
(addition, since it is a complete package with a speci\214c user interf)
2.921 F .421(ace, all programs which use it will)-.1 F 2.363(be pro)
69.336 354 R 2.363(vided with similar deb)-.15 F 2.363
(ugging capabilities.)-.2 F 2.362
(This is in sharp contrast to other forms of internal)7.363 F 1.162
(instrumentation where each de)69.336 366 R -.15(ve)-.25 G 1.162
(loper has their o).15 F 1.162
(wn, usually less capable, form of internal deb)-.25 F(ugger)-.2 E 6.163
(.I)-.55 G(n)-6.163 E(summary)69.336 378 Q 2.901(,b)-.65 G(ecause)-2.901
E F3(db)2.901 E(ug)-.2 E F0 .401(is an internal deb)2.901 F .401
(ugger it pro)-.2 F .401(vides consistenc)-.15 F 2.901(ya)-.15 G .4
(cross operating en)-2.901 F .4(vironments, and)-.4 F 3.64
(because it is a)69.336 390 R -.25(va)-.2 G 3.64(ilable to all de).25 F
-.15(ve)-.25 G 3.64(lopers it pro).15 F 3.64(vides consistenc)-.15 F
6.14(ya)-.15 G 3.64(cross all programs in the same)-6.14 F(en)69.336 402
Q(vironment.)-.4 E(The)94.336 432 Q F3(db)3.456 E(ug)-.2 E F0 .956
(package imposes only a slight speed penalty on e)3.456 F -.15(xe)-.15 G
.955(cuting programs, typically much less).15 F 3.083
(than 10 percent, and a modest size penalty)69.336 444 R 5.583(,t)-.65 G
3.084(ypically 10 to 20 percent.)-5.583 F 3.084
(By de\214ning a speci\214c C)8.084 F(preprocessor symbol both of these\
 can be reduced to zero with no changes required to the source code.)
69.336 456 Q .034(The follo)94.336 486 R .034
(wing list is a quick summary of the capabilities of the)-.25 F F3(db)
2.533 E(ug)-.2 E F0 2.533(package. Each)2.533 F .033(capability can be)
2.533 F(indi)69.336 498 Q .737
(vidually enabled or disabled at the time a program is in)-.25 F -.2(vo)
-.4 G -.1(ke).2 G 3.238(db).1 G 3.238(ys)-3.238 G .738
(pecifying the appropriate command)-3.238 F(line ar)69.336 510 Q
(guments.)-.18 E 5(oE)131.336 534 S -.15(xe)-5 G .883(cution trace sho)
.15 F .883(wing function le)-.25 F -.15(ve)-.25 G 3.383(lc).15 G .883
(ontrol \215o)-3.383 F 3.383(wi)-.25 G 3.383(na)-3.383 G .882
(semi-graphically manner using)-.001 F
(indentation to indicate nesting depth.)141.336 546 Q 5(oO)131.336 564 S
(utput the v)-5 E(alues of all, or an)-.25 E 2.5(ys)-.15 G(ubset of, k)
-2.5 E .3 -.15(ey i)-.1 H(nternal v).15 E(ariables.)-.25 E 5(oL)131.336
582 S(imit actions to a speci\214c set of named functions.)-5 E 5(oL)
131.336 600 S(imit function trace to a speci\214ed nesting depth.)-5 E 5
(oL)131.336 618 S
(abel each output line with source \214le name and line number)-5 E(.)
-.55 E 5(oL)131.336 636 S
(abel each output line with name of current process.)-5 E 5(oP)131.336
654 S(ush or pop internal deb)-5 E(ugging state to allo)-.2 E 2.5(we)
-.25 G -.15(xe)-2.65 G(cution with b).15 E(uilt in deb)-.2 E(ugging def)
-.2 E(aults.)-.1 E 5(oR)131.336 672 S .262(edirect the deb)-5 F .263
(ug output stream to standard output \(stdout\) or a named \214le.)-.2 F
.263(The def)5.263 F(ault)-.1 E 3.284
(output stream is standard error \(stderr\).)141.336 684 R 3.284
(The redirection mechanism is completely)8.284 F
(independent of normal command line redirection to a)141.336 696 Q -.2
(vo)-.2 G(id output con\215icts.).2 E .32 LW 73.336 727 69.336 727 DL
77.336 727 73.336 727 DL 81.336 727 77.336 727 DL 85.336 727 81.336 727
DL 89.336 727 85.336 727 DL 93.336 727 89.336 727 DL 97.336 727 93.336
727 DL 101.336 727 97.336 727 DL 105.336 727 101.336 727 DL 109.336 727
105.336 727 DL 113.336 727 109.336 727 DL 117.336 727 113.336 727 DL
121.336 727 117.336 727 DL 125.336 727 121.336 727 DL 129.336 727
125.336 727 DL 133.336 727 129.336 727 DL 137.336 727 133.336 727 DL
141.336 727 137.336 727 DL 145.336 727 141.336 727 DL 149.336 727
145.336 727 DL/F4 8/Times-Roman@0 SF(1.)69.336 744 Q
(UNIX is a trademark of A)90.595 744 Q(T&T Bell Laboratories.)-.888 E F0
2.5(-2-)277.006 768 S 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(PRIMITIVE DEB)69.336 96 Q
(UGGING TECHNIQ)-.1 E(UES)-.1 E F0 1.284
(Internal instrumentation is already a f)94.336 126 R 1.284
(amiliar concept to most programmers, since it is usually the)-.1 F
3.658(\214rst deb)69.336 138 R 3.658(ugging technique learned.)-.2 F -.8
(Ty)8.658 G(pically).8 E 6.158(,")-.65 G(print statements")-6.158 E
3.657(are inserted in the source code at)6.158 F .503
(interesting points, the code is recompiled and e)69.336 150 R -.15(xe)
-.15 G .503(cuted, and the resulting output is e).15 F .504
(xamined in an attempt)-.15 F(to determine where the problem is.)69.336
162 Q .607(The procedure is iterati)69.336 186 R -.15(ve)-.25 G 3.107
(,w).15 G .606(ith each iteration yielding more and more output, and ho\
pefully the source of)-3.107 F 2.945(the problem is disco)69.336 198 R
-.15(ve)-.15 G 2.945(red before the output becomes too lar).15 F 2.946
(ge to deal with or pre)-.18 F 2.946(viously inserted)-.25 F
(statements need to be remo)69.336 210 Q -.15(ve)-.15 G 2.5(d. Figure)
.15 F 2.5(1i)2.5 G 2.5(sa)-2.5 G 2.5(ne)-2.5 G
(xample of this type of primiti)-2.65 E .3 -.15(ve d)-.25 H(eb).15 E
(ugging technique.)-.2 E/F2 10/Courier@0 SF(main \(argc, argv\))119.336
252 Q(int argc;)119.336 264 Q(char *argv[];)119.336 276 Q({)119.336 288
Q(printf \("argv[0] = %d\\n", argv[0]\);)143.336 300 Q(/*)143.336 312 Q
36(*R)149.336 324 S(est of program)-36 E(*/)149.336 336 Q
(printf \("== done ==\\n"\);)143.336 348 Q(})119.336 360 Q F0(Figure 1)
293.531 396 Q(Primiti)246.546 408 Q .3 -.15(ve D)-.25 H(eb).15 E
(ugging T)-.2 E(echnique)-.7 E(Ev)94.336 468 Q(entually)-.15 E 3.108(,a)
-.65 G .608(nd usually after at least se)-3.108 F -.15(ve)-.25 G .607
(ral iterations, the problem will be found and corrected.).15 F(At)5.607
E .337(this point, the ne)69.336 480 R .337
(wly inserted print statements must be dealt with.)-.25 F .337(One ob)
5.337 F .337(vious solution is to simply delete)-.15 F .042(them all.)
69.336 492 R(Be)5.042 E .042(ginners usually do this a fe)-.15 F 2.542
(wt)-.25 G .042(imes until the)-2.542 F 2.542(yh)-.15 G -2.25 -.2(av e)
-2.542 H .042(to repeat the entire process e)2.742 F -.15(ve)-.25 G .042
(ry time a ne).15 F(w)-.25 E -.2(bu)69.336 504 S 2.555(gp).2 G .055
(ops up.)-2.555 F .056(The second most ob)5.056 F .056
(vious solution is to someho)-.15 F 2.556(wd)-.25 G .056
(isable the output, either through the source)-2.556 F .011
(code comment f)69.336 516 R(acility)-.1 E 2.511(,c)-.65 G .011
(reation of a deb)-2.511 F .011(ug v)-.2 F .011
(ariable to be switched on or of)-.25 F .01
(f, or by using the C preprocessor)-.25 F(.)-.55 E(Figure 2 is an e)
69.336 528 Q(xample of all three techniques.)-.15 E 2.5(-3-)277.006 768
S 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Courier@0 SF(int debug = 0;)119.336 96 Q
(main \(argc, argv\))119.336 120 Q(int argc;)119.336 132 Q
(char *argv[];)119.336 144 Q({)119.336 156 Q
(/* printf \("argv = %x\\n", argv\) */)143.336 168 Q
(if \(debug\) printf \("argv[0] = %d\\n", argv[0]\);)143.336 180 Q(/*)
143.336 192 Q 36(*R)149.336 204 S(est of program)-36 E(*/)149.336 216 Q
(#ifdef DEBUG)119.336 228 Q(printf \("== done ==\\n"\);)143.336 240 Q
(#endif)119.336 252 Q(})119.336 264 Q F0(Figure 2)293.531 300 Q(Deb)
256.631 312 Q(ug Disable T)-.2 E(echniques)-.7 E 1.432
(Each technique has its adv)94.336 372 R 1.432(antages and disadv)-.25 F
1.433(antages with respect to dynamic vs static acti)-.25 F -.25(va)-.25
G(tion,).25 E 1.167(source code o)69.336 384 R -.15(ve)-.15 G 1.166
(rhead, recompilation requirements, ease of use, program readability).15
F 3.666(,e)-.65 G 3.666(tc. Ov)-3.666 F 1.166(eruse of the)-.15 F 1.745
(preprocessor solution quickly leads to problems with source code reada\
bility and maintainability when)69.336 396 R(multiple)69.336 408 Q/F2 10
/Times-Bold@0 SF(#ifdef)4.239 E F0 1.738(symbols are to be de\214ned or\
 unde\214ned based on speci\214c types of deb)4.239 F 1.738(ug desired.)
-.2 F(The)6.738 E .8(source code can be made slightly more readable by \
suitable indentation of the)69.336 420 R F2(#ifdef)3.301 E F0(ar)3.301 E
.801(guments to match)-.18 F .736(the indentation of the code, b)69.336
432 R .736(ut not all C preprocessors allo)-.2 F 3.236(wt)-.25 G 3.236
(his. The)-3.236 F .736(only requirement for the standard)3.236 F F2
(UNIX)69.336 444 Q F0 3.845(Cp)3.845 G 1.345(reprocessor is for the '#'\
 character to appear in the \214rst column, b)-3.845 F 1.346(ut e)-.2 F
-.15(ve)-.25 G 3.846(nt).15 G 1.346(his seems lik)-3.846 F 3.846(ea)-.1
G(n)-3.846 E(arbitrary and unreasonable restriction.)69.336 456 Q
(Figure 3 is an e)5 E(xample of this usage.)-.15 E F1
(main \(argc, argv\))119.336 498 Q(int argc;)119.336 510 Q
(char *argv[];)119.336 522 Q({)119.336 534 Q 18(#i)119.336 546 S
(fdef DEBUG)-18 E(printf \("argv[0] = %d\\n", argv[0]\);)143.336 558 Q
18(#e)119.336 570 S(ndif)-18 E(/*)143.336 582 Q 36(*R)149.336 594 S
(est of program)-36 E(*/)149.336 606 Q 18(#i)119.336 618 S(fdef DEBUG)
-18 E(printf \("== done ==\\n"\);)143.336 630 Q 18(#e)119.336 642 S
(ndif)-18 E(})119.336 654 Q F0(Figure 3)293.531 690 Q
(More Readable Preprocessor Usage)238.831 702 Q 2.5(-4-)277.006 768 S 0
Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(FUNCTION TRA)69.336 96 Q
(CE EXAMPLE)-.55 E F0 3.543 -.8(We w)94.336 126 T 1.943(ill start of).8
F 4.443(fl)-.25 G 1.943(earning about the capabilities of the)-4.443 F
/F2 10/Times-Italic@0 SF(db)4.442 E(ug)-.2 E F0 1.942
(package by using a simple minded)4.442 F 2.053
(program which computes the f)69.336 138 R 2.053(actorial of a number)
-.1 F 7.053(.I)-.55 G 4.553(no)-7.053 G 2.054
(rder to better demonstrate the function trace)-4.553 F 2.192
(mechanism, this program is implemented recursi)69.336 150 R -.15(ve)
-.25 G(ly).15 E 7.192(.F)-.65 G 2.192
(igure 4 is the main function for this f)-7.192 F(actorial)-.1 E
(program.)69.336 162 Q/F3 10/Courier@0 SF(#include <dbug.h>)119.336 204
Q(int main \(argc, argv\))119.336 228 Q(int argc;)119.336 240 Q
(char *argv[];)119.336 252 Q({)119.336 264 Q(int result, ix;)131.336 276
Q(extern int factorial\(int\);)131.336 288 Q(DBUG_ENTER \("main"\);)
131.336 300 Q(DBUG_PROCESS \(argv[0]\);)131.336 312 Q
(for \(ix = 1; ix < argc && argv[ix][0] == '-'; ix++\) {)131.336 324 Q
(switch \(argv[ix][1]\) {)143.336 336 Q(case '#':)143.336 348 Q
(DBUG_PUSH \(&\(argv[ix][2]\)\);)155.336 360 Q(break;)155.336 372 Q(})
143.336 384 Q(})131.336 396 Q(for \(; ix < argc; ix++\) {)131.336 408 Q
(DBUG_PRINT \("args", \("argv[%d] = %s", ix, argv[ix]\)\);)143.336 420 Q
(result = factorial \(atoi\(argv[ix]\)\);)143.336 432 Q
(printf \("%d\\n", result\);)143.336 444 Q(})131.336 456 Q
(DBUG_RETURN \(0\);)131.336 468 Q(})119.336 480 Q F0(Figure 4)293.531
516 Q -.15(Fa)254.861 528 S(ctorial Program Mainline).15 E(The)94.336
588 Q F1(main)4.797 E F0 2.298
(function is responsible for processing an)4.797 F 4.798(yc)-.15 G 2.298
(ommand line option ar)-4.798 F 2.298(guments and then)-.18 F
(computing and printing the f)69.336 600 Q
(actorial of each non-option ar)-.1 E(gument.)-.18 E .448
(First of all, notice that all of the deb)94.336 618 R .447
(ugger functions are implemented via preprocessor macros.)-.2 F(This)
5.447 E .202(does not detract from the readability of the code and mak)
69.336 630 R .203(es disabling all deb)-.1 F .203(ug compilation tri)-.2
F .203(vial \(a single)-.25 F(preprocessor symbol,)69.336 642 Q F1(DB)
2.5 E(UG_OFF)-.1 E F0 2.5(,f)C(orces the macro e)-2.5 E
(xpansions to be null\).)-.15 E .392
(Also notice the inclusion of the header \214le)94.336 660 R F1(db)2.891
E(ug)-.2 E(.h)-.15 E F0 .391(from the local header \214le directory)
2.891 F 5.391(.\()-.65 G .391(The v)-5.391 F(ersion)-.15 E 2.245
(included here is the test v)69.336 672 R 2.245(ersion in the db)-.15 F
2.245(ug source distrib)-.2 F 2.245(ution directory\).)-.2 F 2.245
(This \214le contains all the)7.245 F(de\214nitions for the deb)69.336
684 Q(ugger macros, which all ha)-.2 E .3 -.15(ve t)-.2 H(he form).15 E
F1(DB)2.5 E(UG_XX...XX)-.1 E F0(.)A(The)94.336 714 Q F1(DB)2.535 E
(UG_ENTER)-.1 E F0 .035(macro informs that deb)2.535 F .035
(ugger that we ha)-.2 F .335 -.15(ve e)-.2 H .035
(ntered the function named).15 F F1(main)2.535 E F0 5.035(.I)C(t)-5.035
E .448(must be the v)69.336 726 R .448(ery \214rst "e)-.15 F -.15(xe)
-.15 G .448
(cutable" line in a function, after all declarations and before an).15 F
2.949(yo)-.15 G .449(ther e)-2.949 F -.15(xe)-.15 G(cutable).15 E 2.844
(line. The)69.336 738 R F1(DB)2.844 E(UG_PR)-.1 E(OCESS)-.3 E F0 .344
(macro is generally used only once per program to inform the deb)2.844 F
.344(ugger what)-.2 F 2.5(-5-)277.006 768 S 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E 1.297(name the program w)69.336 96 R 1.297
(as in)-.1 F -.2(vo)-.4 G -.1(ke).2 G 3.797(dw).1 G 3.797(ith. The)
-3.797 F/F1 10/Times-Bold@0 SF(DB)3.797 E(UG_PUSH)-.1 E F0 1.297
(macro modi\214es the current deb)3.797 F 1.298(ugger state by)-.2 F(sa)
69.336 108 Q .966(ving the pre)-.2 F .966(vious state and setting a ne)
-.25 F 3.466(ws)-.25 G .965
(tate based on the control string passed as its ar)-3.466 F 3.465
(gument. The)-.18 F F1(DB)69.336 120 Q(UG_PRINT)-.1 E F0 .227
(macro is used to print the v)2.727 F .227(alues of each ar)-.25 F .227
(gument for which a f)-.18 F .228(actorial is to be computed.)-.1 F(The)
69.336 132 Q F1(DB)2.997 E(UG_RETURN)-.1 E F0 .497(macro tells the deb)
2.997 F .497
(ugger that the end of the current function has been reached and)-.2 F
(returns a v)69.336 144 Q(alue to the calling function.)-.25 E
(All of these macros will be fully e)5 E
(xplained in subsequent sections.)-.15 E 1.6 -.8(To u)94.336 162 T
(se the deb).8 E(ugger)-.2 E 2.5(,t)-.4 G(he f)-2.5 E
(actorial program is in)-.1 E -.2(vo)-.4 G -.1(ke).2 G 2.5(dw).1 G
(ith a command line of the form:)-2.5 E/F2 10/Courier@0 SF
(factorial -#d:t 1 2 3)222.336 180 Q F0(The)69.336 198 Q F1(main)4.268 E
F0 1.769(function recognizes the "-#d:t" string as a deb)4.268 F 1.769
(ugger control string, and passes the deb)-.2 F(ugger)-.2 E(ar)69.336
210 Q .232(guments \("d:t"\) to the)-.18 F/F3 10/Times-Italic@0 SF(db)
2.732 E(ug)-.2 E F0 .231(runtime support routines via the)2.732 F F1(DB)
2.731 E(UG_PUSH)-.1 E F0 2.731(macro. This)2.731 F .231
(particular string)2.731 F .871(enables output from the)69.336 222 R F1
(DB)3.372 E(UG_PRINT)-.1 E F0 .872(macro with the ')3.372 F .872
(d' \215ag and enables function tracing with the ')-.5 F(t')-.18 E 3.107
(\215ag. The)69.336 234 R -.1(fa)3.107 G .606
(ctorial function is then called three times, with the ar).1 F .606
(guments "1", "2", and "3".)-.18 F .606(Note that the)5.606 F(DB)69.336
246 Q .043(UG_PRINT tak)-.1 F .043(es e)-.1 F(xactly)-.15 E F1(tw)2.543
E(o)-.1 E F0(ar)2.543 E .043(guments, with the second ar)-.18 F .044
(gument \(a format string and list of printable)-.18 F -.25(va)69.336
258 S(lues\) enclosed in parentheses.).25 E(Deb)94.336 276 Q 1.109
(ug control strings consist of a header)-.2 F 3.609(,t)-.4 G 1.109
(he "-#", follo)-3.609 F 1.108(wed by a colon separated list of deb)-.25
F(ugger)-.2 E(ar)69.336 288 Q 3.54(guments. Each)-.18 F(deb)3.54 E 1.04
(ugger ar)-.2 F 1.041(gument is a single character \215ag follo)-.18 F
1.041(wed by an optional comma separated)-.25 F(list of ar)69.336 300 Q
(guments speci\214c to the gi)-.18 E -.15(ve)-.25 G 2.5<6e8d>.15 G 2.5
(ag. Some)-2.5 F -.15(ex)2.5 G(amples are:).15 E F2(-#d:t:o)222.336 318
Q(-#d,in,out:f,main:F:L)222.336 330 Q F0(Note that pre)69.336 348 Q
(viously enabled deb)-.25 E
(ugger actions can be disabled by the control string "-#".)-.2 E
(The de\214nition of the f)94.336 378 Q
(actorial function, symbolized as "N!", is gi)-.1 E -.15(ve)-.25 G 2.5
(nb).15 G(y:)-2.5 E(N! = N * N-1 * ... 2 * 1)238.356 396 Q 2.452
(Figure 5 is the f)69.336 414 R 2.452
(actorial function which implements this algorithm recursi)-.1 F -.15
(ve)-.25 G(ly).15 E 7.452(.N)-.65 G 2.452(ote that this is not)-7.452 F
(necessarily the best w)69.336 426 Q(ay to do f)-.1 E
(actorials and error conditions are ignored completely)-.1 E(.)-.65 E
2.5(-6-)277.006 768 S 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Courier@0 SF(#ifdef DBUG_OFF)119.336 96 Q
(/* We are testing dbug */)126 E(int factorial\(register int value\) {)
119.336 120 Q(if\(value > 1\) {)155.336 132 Q
(value *= factorial\(value-1\);)191.336 144 Q(})155.336 156 Q
(return value;)155.336 168 Q(})119.336 180 Q(#else)119.336 204 Q
(#include <my_global.h>)119.336 228 Q(int factorial \()119.336 252 Q
(register int value\))119.336 264 Q({)119.336 276 Q
(DBUG_ENTER \("factorial"\);)143.336 288 Q
(DBUG_PRINT \("find", \("find %d factorial", value\)\);)143.336 300 Q
(if \(value > 1\) {)143.336 312 Q(value *= factorial \(value - 1\);)
155.336 324 Q(})143.336 336 Q
(DBUG_PRINT \("result", \("result is %d", value\)\);)143.336 348 Q
(DBUG_RETURN \(value\);)143.336 360 Q(})119.336 372 Q(#endif)119.336 396
Q F0(Figure 5)293.531 444 Q -.15(Fa)273.606 456 S(ctorial Function).15 E
.131(One adv)94.336 516 R .131
(antage \(some may not consider it so\) to using the)-.25 F/F2 10
/Times-Italic@0 SF(db)2.631 E(ug)-.2 E F0 .132
(package is that it strongly encourages)2.631 F .562
(fully structured coding with only one entry and one e)69.336 528 R .562
(xit point in each function.)-.15 F .561(Multiple e)5.561 F .561
(xit points, such)-.15 F 1.627
(as early returns to escape a loop, may be used, b)69.336 540 R 1.627
(ut each such point requires the use of an appropriate)-.2 F/F3 10
/Times-Bold@0 SF(DB)69.336 552 Q(UG_RETURN)-.1 E F0(or)2.5 E F3(DB)2.5 E
(UG_V)-.1 E(OID_RETURN)-.45 E F0(macro.)2.5 E 1.6 -.8(To b)94.336 582 T
(uild the f).6 E(actorial program on a)-.1 E F3(UNIX)2.5 E F0
(system, compile and link with the command:)2.5 E F1
(cc -o factorial main.c factorial.c -ldbug)162.336 600 Q F0 2.102
(The "-ldb)69.336 618 R 2.102(ug" ar)-.2 F 2.102
(gument tells the loader to link in the runtime support modules for the)
-.18 F F2(db)4.601 E(ug)-.2 E F0(package.)4.601 E(Ex)69.336 630 Q
(ecuting the f)-.15 E(actorial program with a command of the form:)-.1 E
F1(factorial 1 2 3 4 5)228.336 648 Q F0(generates the output sho)69.336
666 Q(wn in \214gure 6.)-.25 E 2.5(-7-)277.006 768 S 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Courier@0 SF(1)119.336 96 Q(2)119.336 108
Q(6)119.336 120 Q(24)119.336 132 Q(120)119.336 144 Q F0(Figure 6)293.531
156 Q F1(factorial 1 2 3 4 5)253.336 168 Q F0 1.456(Function le)94.336
228 R -.15(ve)-.25 G 3.956(lt).15 G 1.456
(racing is enabled by passing the deb)-3.956 F 1.456(ugger the ')-.2 F
1.456(t' \215ag in the deb)-.18 F 1.457(ug control string.)-.2 F
(Figure 7 is the output resulting from the command "f)69.336 240 Q
(actorial -#t:o 2 3".)-.1 E F1(2)119.336 282 Q(6)119.336 294 Q F0
(Figure 7)293.531 330 Q F1(factorial -#t:o 2 3)253.336 342 Q F0 1.159(E\
ach entry to or return from a function is indicated by '>' for the entr\
y point and '<' for the e)94.336 402 R(xit)-.15 E 1.71
(point, connected by v)69.336 414 R 1.71(ertical bars to allo)-.15 F
4.211(wm)-.25 G 1.711
(atching points to be easily found when separated by lar)-4.211 F(ge)
-.18 E(distances.)69.336 426 Q 1.93
(This trace output indicates that there w)94.336 456 R 1.929
(as an initial call to f)-.1 F 1.929
(actorial from main \(to compute 2!\),)-.1 F(follo)69.336 468 Q .434
(wed by a single recursi)-.25 F .734 -.15(ve c)-.25 H .434(all to f).15
F .434(actorial to compute 1!.)-.1 F .435
(The main program then output the result for)5.435 F .377
(2! and called the f)69.336 480 R .376(actorial function ag)-.1 F .376
(ain with the second ar)-.05 F .376(gument, 3.)-.18 F -.15(Fa)5.376 G
.376(ctorial called itself recursi).15 F -.15(ve)-.25 G .376(ly to).15 F
(compute 2! and 1!, then returned control to main, which output the v)
69.336 492 Q(alue for 3! and e)-.25 E(xited.)-.15 E .605(Note that ther\
e is no matching entry point "main>" for the return point "<main" becau\
se at the time)94.336 522 R(the)69.336 534 Q/F2 10/Times-Bold@0 SF(DB)
2.973 E(UG_ENTER)-.1 E F0 .473(macro w)2.973 F .473
(as reached in main, tracing w)-.1 F .473(as not enabled yet.)-.1 F .473
(It w)5.473 F .473(as only after the macro)-.1 F F2(DB)69.336 546 Q
(UG_PUSH)-.1 E F0 -.1(wa)3.408 G 3.408(se).1 G -.15(xe)-3.558 G .908
(cuting that tracing became enabled.).15 F .909
(This implies that the ar)5.909 F .909(gument list should be)-.18 F .055
(processed as early as possible since all code preceding the \214rst ca\
ll to)69.336 558 R F2(DB)2.555 E(UG_PUSH)-.1 E F0 .055
(is essentially in)2.555 F(visible)-.4 E(to)69.336 570 Q F2(db)3.623 E
(ug)-.2 E F0 1.123(\(this can be w)3.623 F(ork)-.1 E 1.123
(ed around by inserting a temporary)-.1 F F2(DB)3.623 E(UG_PUSH\(ar)-.1
E(gv[1]\))-.1 E F0 1.124(immediately after)3.623 F(the)69.336 582 Q F2
(DB)2.5 E(UG_ENTER\("main"\))-.1 E F0(macro.)2.5 E .223(One last note, \
the trace output normally comes out on the standard error)94.336 612 R
5.222(.S)-.55 G .222(ince the f)-5.222 F .222(actorial program)-.1 F
.158(prints its result on the standard output, there is the possibility\
 of the output on the terminal being scrambled)69.336 624 R .05
(if the tw)69.336 636 R 2.55(os)-.1 G .05(treams are not synchronized.)
-2.55 F .05(Thus the deb)5.05 F .05
(ugger is told to write its output on the standard output)-.2 F 1.788
(instead, via the 'o' \215ag character)69.336 648 R 6.788(.N)-.55 G
1.788(ote that no 'o' implies the def)-6.788 F 1.789
(ault \(standard error\), a 'o' with no)-.1 F(ar)69.336 660 Q 3.828
(guments means standard output, and a 'o' with an ar)-.18 F 3.828
(gument means used the named \214le.)-.18 F(i.e,)8.828 E("f)69.336 672 Q
(actorial -#t:o,log\214le 3 2")-.1 E -.1(wo)4.275 G 1.775
(uld write the trace output in "log\214le".).1 F 1.776(Because of)6.776
F F2(UNIX)4.276 E F0(implementation)4.276 E 1.245
(details, programs usually run f)69.336 684 R 1.244
(aster when writing to stdout rather than stderr)-.1 F 3.744(,t)-.4 G
1.244(hough this is not a prime)-3.744 F(consideration in this e)69.336
696 Q(xample.)-.15 E 2.5(-8-)277.006 768 S 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(USE OF DB)69.336 96 Q
(UG_PRINT MA)-.1 E(CR)-.55 E(O)-.3 E F0
(The mechanism used to produce "printf" style output is the)94.336 126 Q
F1(DB)2.5 E(UG_PRINT)-.1 E F0(macro.)2.5 E 1.89 -.8(To a)94.336 156 T
(llo).8 E 2.79(ws)-.25 G .29
(election of output from speci\214c macros, the \214rst ar)-2.79 F .29
(gument to e)-.18 F -.15(ve)-.25 G(ry).15 E F1(DB)2.79 E(UG_PRINT)-.1 E
F0(macro)2.79 E .067(is a)69.336 168 R/F2 10/Times-Italic@0 SF(db)2.567
E(ug)-.2 E F0 -.1(ke)2.567 G(yw)-.05 E 2.567(ord. When)-.1 F .067
(this k)2.567 F -.15(ey)-.1 G -.1(wo).15 G .067(rd appears in the ar).1
F .067(gument list of the ')-.18 F .067(d' \215ag in a deb)-.5 F .067
(ug control string,)-.2 F 1.249(as in "-#d,k)69.336 180 R -.15(ey)-.1 G
-.1(wo).15 G(rd1,k).1 E -.15(ey)-.1 G -.1(wo).15 G 1.249
(rd2,...:t", output from the corresponding macro is enabled.).1 F 1.25
(The def)6.249 F 1.25(ault when)-.1 F(there is no ')69.336 192 Q
(d' \215ag in the control string is to enable output from all)-.5 E F1
(DB)2.5 E(UG_PRINT)-.1 E F0(macros.)2.5 E -.8(Ty)94.336 222 S(pically).8
E 3.152(,ap)-.65 G .652(rogram will be run once, with no k)-3.152 F -.15
(ey)-.1 G -.1(wo).15 G .652(rds speci\214ed, to determine what k).1 F
-.15(ey)-.1 G -.1(wo).15 G .652(rds are).1 F .603
(signi\214cant for the current problem \(the k)69.336 234 R -.15(ey)-.1
G -.1(wo).15 G .603(rds are printed in the macro output line\).).1 F
.604(Then the program)5.603 F(will be run ag)69.336 246 Q
(ain, with the desired k)-.05 E -.15(ey)-.1 G -.1(wo).15 G(rds, to e).1
E(xamine only speci\214c areas of interest.)-.15 E .702(The second ar)
94.336 276 R .702(gument to a)-.18 F F1(DB)3.202 E(UG_PRINT)-.1 E F0
.702(macro is a standard printf style format string and one or)3.202 F
2.149(more ar)69.336 288 R 2.149
(guments to print, all enclosed in parentheses so that the)-.18 F 4.65
(yc)-.15 G(ollecti)-4.65 E -.15(ve)-.25 G 2.15(ly become a single macro)
.15 F(ar)69.336 300 Q 4.13(gument. This)-.18 F 1.63(is ho)4.13 F 4.13
(wv)-.25 G 1.63(ariable numbers of printf ar)-4.38 F 1.63
(guments are supported.)-.18 F 1.63(Also note that no e)6.63 F(xplicit)
-.15 E(ne)69.336 312 Q .19
(wline is required at the end of the format string.)-.25 F .191
(As a matter of style, tw)5.191 F 2.691(oo)-.1 G 2.691(rt)-2.691 G .191
(hree small)-2.691 F F1(DB)2.691 E(UG_PRINT)-.1 E F0 .845
(macros are preferable to a single macro with a huge format string.)
69.336 324 R .845(Figure 8 sho)5.845 F .845(ws the output for def)-.25 F
(ault)-.1 E(tracing and deb)69.336 336 Q(ug.)-.2 E/F3 10/Courier@0 SF(6)
119.336 378 Q F0(Figure 8)293.531 414 Q F3(factorial -#d:t:o 3)253.336
426 Q F0 .55(The output from the)94.336 462 R F1(DB)3.05 E(UG_PRINT)-.1
E F0 .551
(macro is indented to match the trace output for the function in)3.05 F
1.235(which the macro occurs.)69.336 474 R 1.234(When deb)6.234 F 1.234
(ugging is enabled, b)-.2 F 1.234
(ut not trace, the output starts at the left mar)-.2 F(gin,)-.18 E
(without indentation.)69.336 486 Q 2.444 -.8(To d)94.336 516 T .844
(emonstrate selection of speci\214c macros for output, \214gure 9 sho).8
F .844(ws the result when the f)-.25 F(actorial)-.1 E(program is in)
69.336 528 Q -.2(vo)-.4 G -.1(ke).2 G 2.5(dw).1 G(ith the deb)-2.5 E
(ug control string "-#d,result:o".)-.2 E F3(24)119.336 570 Q F0
(Figure 9)293.531 606 Q F3(factorial -#d,result:o 4)238.336 618 Q F0
1.912(It is sometimes desirable to restrict deb)94.336 654 R 1.911
(ugging and trace actions to a speci\214c function or list of)-.2 F
3.694(functions. This)69.336 666 R 1.194(is accomplished with the 'f)
3.694 F 3.695<278d>.55 G 1.195(ag character in the deb)-3.695 F 1.195
(ug control string.)-.2 F 1.195(Figure 10 is the)6.195 F 2.257
(output of the f)69.336 678 R 2.256
(actorial program when run with the control string "-#d:f,f)-.1 F 4.756
(actorial:F:L:o". The)-.1 F 2.256('F' \215ag)4.756 F
(enables printing of the source \214le name and the 'L)69.336 690 Q 2.5
<278d>-.92 G(ag enables printing of the source \214le line number)-2.5 E
(.)-.55 E 2.5(-9-)277.006 768 S 0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Courier@0 SF(6)119.336 96 Q F0(Figure 10)
291.031 132 Q F1(factorial -#d:f,factorial:F:L:o 3)211.336 144 Q F0
1.109(The output in \214gure 10 sho)94.336 180 R 1.109
(ws that the "\214nd" macro is in \214le "f)-.25 F 1.109
(actorial.c" at source line 8 and the)-.1 F
("result" macro is in the same \214le at source line 12.)69.336 192 Q
2.5(-1)274.506 768 S 2.5(0-)-2.5 G 0 Cg EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(SUMMAR)69.336 96 Q 2.5
(YO)-.35 G 2.5(FM)-2.5 G -.55(AC)-2.5 G -.3(RO).55 G(S).3 E F0 .393(Thi\
s section summarizes the usage of all currently de\214ned macros in the)
94.336 126 R/F2 10/Times-Italic@0 SF(db)2.892 E(ug)-.2 E F0 2.892
(package. The)2.892 F(macros)2.892 E
(de\214nitions are found in the user include \214le)69.336 138 Q F1(db)
2.5 E(ug)-.2 E(.h)-.15 E F0(from the standard include directory)2.5 E(.)
-.65 E(DB)96.386 186 Q 5(UG_ENTER Used)-.1 F 1.012(to tell the runtime \
support module the name of the function being entered.)3.511 F .457
(The ar)169.336 198 R .456
(gument must be of type "pointer to character".)-.18 F .456(The DB)5.456
F .456(UG_ENTER macro)-.1 F .31(must precede all e)169.336 210 R -.15
(xe)-.15 G .31
(cutable lines in the function just entered, and must come after).15 F
4.075(all local declarations.)169.336 222 R 4.075(Each DB)9.075 F 4.074
(UG_ENTER macro must ha)-.1 F 4.374 -.15(ve a m)-.2 H(atching).15 E(DB)
169.336 234 Q 1.007(UG_RETURN or DB)-.1 F(UG_V)-.1 E 1.008
(OID_RETURN macro at the function e)-.4 F 1.008(xit points.)-.15 F(DB)
169.336 246 Q 6.866(UG_ENTER macros used without a matching DB)-.1 F
6.865(UG_RETURN or)-.1 F(DB)169.336 258 Q(UG_V)-.1 E 3.065
(OID_RETURN macro will cause w)-.4 F 3.065(arning messages from the)-.1
F F2(db)5.565 E(ug)-.2 E F0(package runtime support module.)169.336 270
Q(EX:)169.336 294 Q/F3 10/Courier@0 SF(DBUG_ENTER \("main"\);)2.5 E F0
(DB)88.606 318 Q 5(UG_RETURN Used)-.1 F 1.182(at each e)3.682 F 1.182
(xit point of a function containing a DB)-.15 F 1.181
(UG_ENTER macro at the)-.1 F .316(entry point.)169.336 330 R .316
(The ar)5.316 F .316(gument is the v)-.18 F .316(alue to return.)-.25 F
.316(Functions which return no v)5.316 F(alue)-.25 E(\(v)169.336 342 Q
1.695(oid\) should use the DB)-.2 F(UG_V)-.1 E 1.694(OID_RETURN macro.)
-.4 F 1.694(It is an error to ha)6.694 F 1.994 -.15(ve a)-.2 H(DB)
169.336 354 Q .756(UG_RETURN or DB)-.1 F(UG_V)-.1 E .757
(OID_RETURN macro in a function which has no)-.4 F 1.464(matching DB)
169.336 366 R 1.464
(UG_ENTER macro, and the compiler will complain if the macros)-.1 F
(are actually used \(e)169.336 378 Q(xpanded\).)-.15 E(EX:)169.336 402 Q
F3(DBUG_RETURN \(value\);)2.5 E F0(EX:)169.336 414 Q F3
(DBUG_VOID_RETURN;)2.5 E F0(DB)85.656 438 Q(UG_PR)-.1 E 5(OCESS Used)-.4
F 1.74(to name the current process being e)4.24 F -.15(xe)-.15 G 4.24
(cuted. A).15 F 1.74(typical ar)4.24 F 1.74(gument for this)-.18 F 1.4
(macro is "ar)169.336 450 R 1.4
(gv[0]", though it will be perfectly happ)-.18 F 3.9(yw)-.1 G 1.4
(ith an)-3.9 F 3.9(yo)-.15 G 1.4(ther string.)-3.9 F(Im)6.4 E
(multi-threaded en)169.336 462 Q(vironment threads may ha)-.4 E .3 -.15
(ve d)-.2 H(if).15 E(ferent names.)-.25 E(EX:)169.336 486 Q F3
(DBUG_PROCESS \(argv[0]\);)2.5 E F0(DB)103.046 510 Q 5(UG_PUSH Sets)-.1
F 2.771(an)2.771 G .771 -.25(ew d)-2.771 H(eb).25 E .271
(ugger state by pushing the current)-.2 F F1(db)2.772 E(ug)-.2 E F0 .272
(state onto an internal stack)2.772 F 1.25(and setting up the ne)169.336
522 R 3.749(ws)-.25 G 1.249(tate using the deb)-3.749 F 1.249
(ug control string passed as the macro)-.2 F(ar)169.336 534 Q 2.712
(gument. The)-.18 F .212
(most common usage is to set the state speci\214ed by a deb)2.712 F .213
(ug control)-.2 F .186(string retrie)169.336 546 R -.15(ve)-.25 G 2.686
(df).15 G .186(rom the ar)-2.686 F .185
(gument list. If the control string is)-.18 F F2(incr)2.685 E(emental,)
-.37 E F0 .185(the ne)2.685 F(w)-.25 E(state is a cop)169.336 558 Q 2.5
(yo)-.1 G 2.5(ft)-2.5 G(he old state, modi\214ed by the control string.)
-2.5 E(EX:)169.336 582 Q F3(DBUG_PUSH \(\(argv[i][2]\)\);)2.5 E F0(EX:)
169.336 594 Q F3(DBUG_PUSH \("d:t"\);)2.5 E F0(EX:)169.336 606 Q F3
(DBUG_PUSH \(""\);)2.5 E F0(DB)110.266 630 Q 5(UG_POP Restores)-.1 F
1.462(the pre)3.962 F 1.462(vious deb)-.25 F 1.463
(ugger state by popping the state stack.)-.2 F 1.463(Attempting to)6.463
F .975(pop more states than pushed will be ignored and no w)169.336 642
R .975(arning will be gi)-.1 F -.15(ve)-.25 G 3.475(n. The).15 F(DB)
169.336 654 Q(UG_POP macro has no ar)-.1 E(guments.)-.18 E(EX:)169.336
678 Q F3(DBUG_POP \(\);)2.5 E F0(DB)110.826 702 Q 5(UG_SET Modi\214es)
-.1 F .226(the current deb)2.726 F .226
(ugger state on top of the stack or pushes a ne)-.2 F 2.727(ws)-.25 G
.227(tate if the)-2.727 F 1.289
(current is set to the initial settings, using the deb)169.336 714 R
1.289(ug control string passed as the)-.2 F 3.034(macro ar)169.336 726 R
5.534(gument. Unless)-.18 F F2(incr)5.534 E(emental)-.37 E F0 3.034
(control string is used \(see belo)5.534 F 3.034(w\), it')-.25 F(s)-.55
E(equi)169.336 738 Q -.25(va)-.25 G(lent to a combination of DB).25 E
(UG_POP and DB)-.1 E(UG_PUSH.)-.1 E 2.5(-1)274.506 768 S 2.5(1-)-2.5 G 0
Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E(EX:)169.336 96 Q/F1 10/Courier@0 SF
(DBUG_SET \("d:t"\);)2.5 E F0(EX:)169.336 108 Q F1
(DBUG_SET \("+d,info"\);)2.5 E F0(EX:)169.336 120 Q F1
(DBUG_SET \("+t:-d"\);)2.5 E F0(DB)107.496 144 Q 5(UG_FILE The)-.1 F(DB)
2.955 E .455(UG_FILE macro is used to do e)-.1 F .455
(xplicit I/O on the deb)-.15 F .455(ug output stream.)-.2 F(It)5.455 E
1.122(is used in the same manner as the symbols "stdout" and "stderr" i\
n the standard)169.336 156 R(I/O package.)169.336 168 Q(EX:)169.336 192
Q F1(fprintf \(DBUG_FILE, "Doing my own I/O!\\n"\);)2.5 E F0(DB)83.056
216 Q 5(UG_EXECUTE The)-.1 F(DB)3.274 E .774
(UG_EXECUTE macro is used to e)-.1 F -.15(xe)-.15 G .773(cute an).15 F
3.273(ya)-.15 G .773(rbitrary C code.)-3.273 F .773(The \214rst)5.773 F
(ar)169.336 228 Q .537(gument is the deb)-.18 F .537(ug k)-.2 F -.15(ey)
-.1 G -.1(wo).15 G .537(rd, used to trigger e).1 F -.15(xe)-.15 G .537
(cution of the code speci\214ed as).15 F 2.687(the second ar)169.336 240
R 5.187(gument. This)-.18 F 2.686
(macro must be used cautiously because, lik)5.187 F 5.186(et)-.1 G(he)
-5.186 E(DB)169.336 252 Q .135
(UG_PRINT macro, it is automatically selected by def)-.1 F .136
(ault whene)-.1 F -.15(ve)-.25 G 2.636(rt).15 G .136(he ')-2.636 F .136
(d' \215ag)-.5 F(has no ar)169.336 264 Q
(gument list \(i.e., a "-#d:t" control string\).)-.18 E(EX:)169.336 288
Q F1(DBUG_EXECUTE \("status", print_status \(\)\);)2.5 E F0(DB)69.336
312 Q 4.83(UG_EXECUTE_IF W)-.1 F .088(orks lik)-.8 F 2.588(eD)-.1 G -.1
(BU)-2.588 G .088(G_EXECUTE macro, b).1 F .088(ut the code is)-.2 F/F2
10/Times-Bold@0 SF(not)2.587 E F0 -.15(exe)2.587 G .087(cuted "by def)
.15 F .087(ault", if)-.1 F 1.067(the k)169.336 324 R -.15(ey)-.1 G -.1
(wo).15 G 1.067(rd is not e).1 F 1.068(xplicitly listed in the ')-.15 F
1.068(d' \215ag. Used to conditionally e)-.5 F -.15(xe)-.15 G(cute).15 E
1.144("dangerous" actions, e.g to crash the program testing ho)169.336
336 R 3.643(wr)-.25 G(eco)-3.643 E -.15(ve)-.15 G 1.143(ry w).15 F 1.143
(orks, or to)-.1 F
(introduce an arti\214cial delay checking for race conditions.)169.336
348 Q(EX:)169.336 372 Q F1(DBUG_EXECUTE_IF \("crashme", abort \(\)\);)
2.5 E F0(DB)78.146 396 Q(UG_EV)-.1 E(ALU)-1.35 E -1.11(AT)-.4 G 7.5(ET)
1.11 G 1.78(he DB)-7.5 F(UG_EV)-.1 E(ALU)-1.35 E -1.11(AT)-.4 G 4.28(Em)
1.11 G 1.78(acro is similar to DB)-4.28 F 1.78(UG_EXECUTE, b)-.1 F 1.78
(ut it can be)-.2 F 1.433(used in the e)169.336 408 R 1.433
(xpression conte)-.15 F 1.432(xt. The \214rst ar)-.15 F 1.432
(gument is the deb)-.18 F 1.432(ug k)-.2 F -.15(ey)-.1 G -.1(wo).15 G
1.432(rd that is).1 F .79(used to choose whether the second \(k)169.336
420 R -.15(ey)-.1 G -.1(wo).15 G .79(rd is enabled\) or the third \(k).1
F -.15(ey)-.1 G -.1(wo).15 G .79(rd is).1 F 3.495(not enabled\) ar)
169.336 432 R 3.495(gument is e)-.18 F -.25(va)-.25 G 3.495
(luated. When).25 F F2(db)5.995 E(ug)-.2 E F0 3.494(is compiled of)5.994
F 3.494(f, the third)-.25 F(ar)169.336 444 Q(gument is e)-.18 E -.25(va)
-.25 G(luated.).25 E(EX:)169.336 468 Q F1(printf\("Info-debug is %s",)
181.336 480 Q(DBUG_EVALUATE \("info", "ON", "OFF"\)\);)223.336 492 Q F0
(DB)69.336 516 Q(UG_EV)-.1 E(ALU)-1.35 E -1.11(AT)-.4 G 2.5(E_IF W)1.11
F .144(orks lik)-.8 F 2.644(eD)-.1 G -.1(BU)-2.644 G(G_EV).1 E(ALU)-1.35
E -1.11(AT)-.4 G 2.644(Em)1.11 G .144(acro, b)-2.644 F .144
(ut the second ar)-.2 F .144(gument is)-.18 F F2(not)2.644 E F0 -.25
(eva)2.644 G(luated,).25 E .894(if the k)169.336 528 R -.15(ey)-.1 G -.1
(wo).15 G .894(rd is not e).1 F .893(xplicitly listed in the ')-.15 F
.893(d' \215ag. Lik)-.5 F 3.393(eD)-.1 G -.1(BU)-3.393 G(G_EXECUTE_IF).1
E(this could be used to conditionally e)169.336 540 Q -.15(xe)-.15 G
(cute "dangerous" actions.).15 E(EX:)169.336 564 Q F1
(if \(prepare_transaction \(\) ||)193.336 576 Q
(DBUG_EVALUATE \("crashme", \(abort \(\), 0\), 0\) ||)217.336 588 Q
(commit_transaction \(\) \))217.336 600 Q F0(DB)99.716 624 Q 5
(UG_PRINT Used)-.1 F .571
(to do printing via the "fprintf" library function on the current deb)
3.07 F .571(ug stream,)-.2 F(DB)169.336 636 Q 4.476(UG_FILE. The)-.1 F
1.976(\214rst ar)4.476 F 1.976(gument is a deb)-.18 F 1.976(ug k)-.2 F
-.15(ey)-.1 G -.1(wo).15 G 1.976(rd, the second is a format).1 F 2.953
(string and the corresponding ar)169.336 648 R 2.954(gument list.)-.18 F
2.954(Note that the format string and)7.954 F(ar)169.336 660 Q
(gument list are all one macro ar)-.18 E(gument and)-.18 E F2(must)2.5 E
F0(be enclosed in parentheses.)2.5 E(EX:)169.336 684 Q F1
(DBUG_PRINT \("eof", \("end of file found"\)\);)2.5 E F0(EX:)169.336 696
Q F1(DBUG_PRINT \("type", \("type is %x", type\)\);)2.5 E F0(EX:)169.336
708 Q F1(DBUG_PRINT \("stp", \("%x -> %s", stp, stp -> name\)\);)2.5 E
F0 2.5(-1)274.506 768 S 2.5(2-)-2.5 G 0 Cg EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E(DB)99.716 96 Q 5(UG_DUMP Used)-.1 F 1.677
(to dump a memory block in he)4.177 F 4.176(xv)-.15 G 1.676
(ia the "fprintf" library function on the)-4.176 F .911(current deb)
169.336 108 R .911(ug stream, DB)-.2 F 3.412(UG_FILE. The)-.1 F .912
(\214rst ar)3.412 F .912(gument is a deb)-.18 F .912(ug k)-.2 F -.15(ey)
-.1 G -.1(wo).15 G .912(rd, the).1 F(second is a pointer to a memory to\
 dump, the third is a number of bytes to dump.)169.336 120 Q(EX:)169.336
144 Q/F1 10/Courier@0 SF(DBUG_DBUG \("net", packet, len\);)2.5 E F0(DB)
92.486 168 Q 5(UG_SETJMP Used)-.1 F .663
(in place of the setjmp\(\) function to \214rst sa)3.163 F .963 -.15
(ve t)-.2 H .663(he current deb).15 F .662(ugger state and)-.2 F 1.133
(then e)169.336 180 R -.15(xe)-.15 G 1.134
(cute the standard setjmp call.).15 F 1.134(This allo)6.134 F 1.134
(ws to the deb)-.25 F 1.134(ugger to restore its)-.2 F .233
(state when the DB)169.336 192 R .233(UG_LONGJMP macro is used to in)-.1
F -.2(vo)-.4 G .432 -.1(ke t).2 H .232(he standard longjmp\(\)).1 F 4.99
(call. Currently)169.336 204 R 2.49(all instances of DB)4.99 F 2.49
(UG_SETJMP must occur within the same)-.1 F
(function and at the same function nesting le)169.336 216 Q -.15(ve)-.25
G(l.).15 E(EX:)169.336 240 Q F1(DBUG_SETJMP \(env\);)2.5 E F0(DB)82.496
264 Q 5(UG_LONGJMP Used)-.1 F .299
(in place of the longjmp\(\) function to \214rst restore the pre)2.8 F
.299(vious deb)-.25 F .299(ugger state)-.2 F 1.082
(at the time of the last DB)169.336 276 R 1.083(UG_SETJMP and then e)-.1
F -.15(xe)-.15 G 1.083(cute the standard longjmp\(\)).15 F 4.237
(call. Note)169.336 288 R 1.737(that currently all DB)4.237 F 1.736
(UG_LONGJMP macros restore the state at the)-.1 F 2.751
(time of the last DB)169.336 300 R(UG_SETJMP)-.1 E 7.752(.I)-1.11 G
5.252(tw)-7.752 G 2.752(ould be possible to maintain separate)-5.352 F
(DB)169.336 312 Q 1.509(UG_SETJMP and DB)-.1 F 1.509
(UG_LONGJMP pairs by ha)-.1 F 1.509(ving the deb)-.2 F 1.508
(ugger runtime)-.2 F(support module use the \214rst ar)169.336 324 Q
(gument to dif)-.18 E(ferentiate the pairs.)-.25 E(EX:)169.336 348 Q F1
(DBUG_LONGJMP \(env,val\);)2.5 E F0(DB)75.276 372 Q 5(UG_LOCK_FILE Used)
-.1 F .534(in multi-threaded en)3.034 F .534(vironment to lock DB)-.4 F
.535(UG_FILE stream.)-.1 F .535(It can be used,)5.535 F 1.467(for e)
169.336 384 R 1.466
(xample, in functions that need to write something to a deb)-.15 F 1.466
(ug stream more)-.2 F 2.614(than in one fprintf\(\) call and w)169.336
396 R 2.614(ant to ensure that no other thread will write)-.1 F
(something in between.)169.336 408 Q(EX:)169.336 432 Q F1
(DBUG_LOCK_FILE;)181.336 444 Q(fprintf \(DBUG_FILE, "a=["\);)181.336 456
Q(for \(int i=0; i < a_length; i++\))181.336 468 Q
(fprintf \(DBUG_FILE, "0x%03x ", a[i]\);)193.336 480 Q
(fprintf \(DBUG_FILE, "]"\);)181.336 492 Q(DBUG_UNLOCK_FILE;)181.336 504
Q F0(DB)69.336 528 Q 2.5(UG_UNLOCK_FILE Unlocks)-.1 F(DB)2.5 E
(UG_FILE stream, that w)-.1 E(as lock)-.1 E(ed with a DB)-.1 E
(UG_LOCK_FILE.)-.1 E(DB)91.976 546 Q(UG_ASSER)-.1 E 7.5(TT)-.6 G .202
(his macro just does a re)-7.5 F .201(gular assert\(\). The dif)-.15 F
.201(ference is that it will be disabled by)-.25 F(DB)169.336 558 Q
1.468(UG_OFF togeher with the)-.1 F/F2 10/Times-Italic@0 SF(db)3.968 E
(ug)-.2 E F0(library)3.968 E 3.968(.S)-.65 G 3.968(ot)-3.968 G 1.469
(here will be no need to disable)-3.968 F(asserts separately with NDEB)
169.336 570 Q(UG.)-.1 E(EX:)169.336 594 Q F1(DBUG_ASSERT\( a > 0 \);)2.5
E F0(DB)85.836 618 Q 5(UG_EXPLAIN Generates)-.1 F 2.227
(control string corresponding to the current deb)4.727 F 2.227
(ug state.)-.2 F 2.227(The macro)7.227 F(tak)169.336 630 Q 1.265(es tw)
-.1 F 3.765(oa)-.1 G -.18(rg)-3.765 G 1.265(uments - a b).18 F(uf)-.2 E
1.265(fer to store the result string into and its length. The)-.25 F
.537(macro \(which could be used as a function\) returns 1 if the contr\
ol string didn')169.336 642 R 3.037<748c>-.18 G(t)-3.037 E(into the b)
169.336 654 Q(uf)-.2 E(fer and w)-.25 E(as truncated and 0 otherwise.)
-.1 E(EX:)169.336 678 Q F1(char buf[256];)181.336 690 Q
(DBUG_EXPLAIN\( buf, sizeof\(buf\) \);)181.336 702 Q F0 2.5(-1)274.506
768 S 2.5(3-)-2.5 G 0 Cg EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E(DB)69.336 96 Q(UG_SET_INITIAL)-.1 E(DB)69.336
114 Q(UG_EXPLAIN_INITIAL)-.1 E 1.131(These tw)169.336 126 R 3.631(om)-.1
G 1.131(acros are identical to DB)-3.631 F 1.131(UG_SET and DB)-.1 F
1.131(UG_EXPLAIN, b)-.1 F 1.131(ut the)-.2 F(y)-.15 E .073
(operate on the deb)169.336 138 R .073(ug state that an)-.2 F 2.573(yn)
-.15 G .573 -.25(ew t)-2.573 H .073(hread starts from.).25 F(Modifying)
5.073 E/F1 10/Times-Italic@0 SF(initial)2.573 E F0 -.25(va)2.573 G(lue)
.25 E .538(does not af)169.336 150 R .538
(fect threads that are already running. Ob)-.25 F(viously)-.15 E 3.039
(,t)-.65 G .539(hese macros are only)-3.039 F
(useful in the multi-threaded en)169.336 162 Q(vironment.)-.4 E 2.5(-1)
274.506 768 S 2.5(4-)-2.5 G 0 Cg EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(DEB)69.336 96 Q(UG CONTR)
-.1 E(OL STRING)-.3 E F0 3.18(The deb)94.336 126 R 3.179
(ug control string is used to set the state of the deb)-.2 F 3.179
(ugger via the)-.2 F F1(DB)5.679 E(UG_PUSH)-.1 E F0(or)5.679 E F1(DB)
69.336 138 Q(UG_SET)-.1 E F0 .076
(macros. Control string consists of colon separate \215ags.)2.576 F .077
(Colons that are part of ':\\',)5.076 F .077(':/', or '::')5.077 F .69
(are not considered \215ag separators. A \215ag may tak)69.336 150 R
3.19(ea)-.1 G 3.189(na)-3.19 G -.18(rg)-3.189 G .689
(ument or a list of ar).18 F 3.189(guments. If)-.18 F 3.189(ac)3.189 G
.689(ontrol string)-3.189 F .884(starts from a '+' sign it w)69.336 162
R(orks)-.1 E/F2 10/Times-Italic@0 SF(incr)3.384 E(ementally)-.37 E(,)
-.55 E F0 .884(that is, it can modify e)3.384 F .884
(xisting state without o)-.15 F -.15(ve)-.15 G .884(rriding it. In).15 F
.552(such a string e)69.336 174 R -.15(ve)-.25 G .551(ry \215ag may be \
preceded by a '+' or '-' to enable or disable a corresponding option in\
 the).15 F(deb)69.336 186 Q .973(ugger state.)-.2 F .974
(This section summarizes the currently a)5.973 F -.25(va)-.2 G .974
(ilable deb).25 F .974(ugger options and the \215ag characters)-.2 F
(which enable or disable them.)69.336 198 Q(Ar)5 E
(gument lists enclosed in '[' and ']' are optional.)-.18 E 2.5
(a[,\214le] Redirect)147.956 234 R 1.576(the deb)4.076 F 1.576
(ugger output stream and append it to the speci\214ed \214le.)-.2 F(The)
6.575 E(def)179.336 246 Q 3.061(ault output stream is stderr)-.1 F 8.062
(.A)-.55 G 3.062(null ar)-2.5 F 3.062(gument list causes output to be)
-.18 F(redirected to stdout.)179.336 258 Q(EX:)179.336 282 Q/F3 10
/Courier@0 SF(a,C:\\tmp\\log)2.5 E F0 2.5(A[,\214le] Lik)145.176 300 R
4.157(e')-.1 G 1.657(a[,\214le]' b)-4.157 F 1.657
(ut ensure that data are written after each write \(this typically)-.2 F
1.871(implies \215ush or close/reopen\). It helps to get a complete log\
 \214le in case of)179.336 312 R
(crashes. This mode is implicit in multi-threaded en)179.336 324 Q
(vironment.)-.4 E(d[,k)121.646 342 Q -.15(ey)-.1 G -.1(wo).15 G 2.5
(rds] Enable).1 F 4.071(output from macros with speci\214ed k)6.571 F
-.15(ey)-.1 G -.1(wo).15 G 6.571(rds. An).1 F 4.071(empty list of)6.571
F -.1(ke)179.336 354 S(yw)-.05 E(ords implies that all k)-.1 E -.15(ey)
-.1 G -.1(wo).15 G(rds are selected.).1 E 2.5(D[,time] Delay)140.176 372
R .021
(for speci\214ed time after each output line, to let output drain.)2.52
F -.35(Ti)5.021 G .021(me is gi).35 F -.15(ve)-.25 G(n).15 E
(in tenths of a second \(v)179.336 384 Q(alue of 10 is one second\).)
-.25 E(Def)5 E(ault is zero.)-.1 E 2.5(f[,functions] Limit)124.626 402 R
(deb)4.86 E 2.36(ugger actions to the speci\214ed list of functions.)-.2
F 2.36(An empty list of)7.36 F
(functions implies that all functions are selected.)179.336 414 Q 5(FM)
168.776 432 S .493(ark each deb)-5 F .494
(ugger output line with the name of the source \214le containing the)-.2
F(macro causing the output.)179.336 444 Q 5(iM)171.556 462 S 2.034
(ark each deb)-5 F 2.034
(ugger output line with the PID \(or thread ID\) of the current)-.2 F
(process.)179.336 474 Q 2.5(g,[functions] Enable)122.956 492 R 1.047
(pro\214ling for the speci\214ed list of functions.)3.547 F 1.048
(An empty list of functions)6.048 F
(enables pro\214ling for all functions.)179.336 504 Q(See)5 E F1(PR)2.5
E(OFILING WITH DB)-.3 E(UG)-.1 E F0(belo)2.5 E -.65(w.)-.25 G 5(LM)
168.226 522 S .922(ark each deb)-5 F .921
(ugger output line with the source \214le line number of the macro)-.2 F
(causing the output.)179.336 534 Q 5(nM)169.336 552 S(ark each deb)-5 E
(ugger output line with the current function nesting depth.)-.2 E 5(NS)
167.116 570 S .649(equentially number each deb)-5 F .649
(ugger output line starting at 1.)-.2 F .65(This is useful for)5.649 F
(reference purposes when deb)179.336 582 Q
(ugger output is interspersed with program output.)-.2 E 2.5
(o[,\214le] Lik)147.396 600 R 2.5(e')-.1 G(a[,\214le]' b)-2.5 E(ut o)-.2
E -.15(ve)-.15 G(rwrite old \214le, do not append.).15 E 2.5
(O[,\214le] Lik)145.176 618 R 2.5(e')-.1 G(A[,\214le]' b)-2.5 E(ut o)-.2
E -.15(ve)-.15 G(rwrite old \214le, do not append.).15 E 2.5
(p[,processes] Limit)121.856 636 R(deb)4.242 E 1.742
(ugger actions to the speci\214ed processes.)-.2 F 1.742
(An empty list implies all)6.742 F 4.025(processes. This)179.336 648 R
1.525(is useful for processes which run child processes.)4.025 F 1.526
(Note that)6.526 F .76(each deb)179.336 660 R .76
(ugger output line can be mark)-.2 F .76
(ed with the name of the current process)-.1 F 1.944
(via the 'P' \215ag.)179.336 672 R 1.945
(The process name must match the ar)6.944 F 1.945(gument passed to the)
-.18 F F1(DB)179.336 684 Q(UG_PR)-.1 E(OCESS)-.3 E F0(macro.)2.5 E 5(PM)
168.776 702 S 1.531(ark each deb)-5 F 1.531
(ugger output line with the name of the current process.)-.2 F(Most)6.53
E .565(useful when used with a process which runs child processes that \
are also being)179.336 714 R(deb)179.336 726 Q 3.458(ugged. Note)-.2 F
.957(that the parent process must arrange for the deb)3.458 F .957
(ugger control)-.2 F(string to be passed to the child processes.)179.336
738 Q 2.5(-1)274.506 768 S 2.5(5-)-2.5 G 0 Cg EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E 5(rU)171.006 96 S 3.88
(sed in conjunction with the)-5 F/F1 10/Times-Bold@0 SF(DB)6.38 E
(UG_PUSH)-.1 E F0 3.88(macro to reset the current)6.38 F .306
(indentation le)179.336 108 R -.15(ve)-.25 G 2.806(lb).15 G .306
(ack to zero.)-2.806 F .305(Most useful with)5.306 F F1(DB)2.805 E
(UG_PUSH)-.1 E F0 .305(macros used to)2.805 F(temporarily alter the deb)
179.336 120 Q(ugger state.)-.2 E 5(SW)168.776 138 S 1.333
(hen compiled with)-5 F/F2 10/Times-Italic@0 SF(safemalloc)3.833 E F0
1.333(this \215ag forces "sanity" memory checks \(for)3.833 F -.15(ove)
179.336 150 S(rwrites/underwrites\) on each).15 E F1(DB)2.5 E(UG_ENTER)
-.1 E F0(and)2.5 E F1(DB)2.5 E(UG_RETURN.)-.1 E F0 2.5(t[,N] Enable)
155.176 168 R .783(function control \215o)3.283 F 3.283(wt)-.25 G 3.283
(racing. The)-3.283 F .783(maximum nesting depth is speci\214ed)3.283 F
(by N, and def)179.336 180 Q(aults to 200.)-.1 E 5(TM)168.226 198 S
2.575(ark each deb)-5 F 2.575
(ugger output line with the current timestamp.)-.2 F 2.576(The v)7.576 F
2.576(alue is)-.25 F .578
(printed with microsecond resolution, as returned by)179.336 210 R F2
-.1(ge)3.078 G(ttimeofday\(\)).1 E F0 .577(system call.)3.077 F
(The actual resolution is OS- and hardw)179.336 222 Q(are-dependent.)-.1
E 2.5(-1)274.506 768 S 2.5(6-)-2.5 G 0 Cg EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(MUL)69.336 96 Q
(TI-THREADED DEB)-.92 E(UGGING)-.1 E F0(When)94.336 126 Q/F2 10
/Times-Italic@0 SF(db)2.887 E(ug)-.2 E F0 .388
(is used in a multi-threaded en)2.887 F .388(vironment there are fe)-.4
F 2.888(wd)-.25 G(if)-2.888 E .388(ferences from a single-threaded)-.25
F(case to k)69.336 138 Q
(eep in mind. This section tries to summarize them.)-.1 E/F3 8
/Times-Roman@0 SF<83>86.536 174 Q F0(Ev)5 E .659(ery thread has its o)
-.15 F .659(wn stack of deb)-.25 F .659(ugger states.)-.2 F F1(DB)5.658
E(UG_PUSH)-.1 E F0(and)3.158 E F1(DB)3.158 E(UG_POP)-.1 E F0(af)3.158 E
.658(fect only the)-.25 F(thread that e)94.336 186 Q -.15(xe)-.15 G
(cuted them.).15 E F3<83>86.536 204 Q F0 .458
(At the bottom of the stack for all threads there is the common)5 F F2
(initial)2.958 E F0 .458(state. Changes to this state \(for)2.958 F -.15
(ex)94.336 216 S 1.692(ample, with).15 F F1(DB)4.192 E(UG_SET_INITIAL)
-.1 E F0 1.692(macro\) af)4.192 F 1.692(fect all ne)-.25 F 4.192(wt)-.25
G 1.691(hreads and all running threads that)-4.192 F(didn')94.336 228 Q
(t)-.18 E F1(DB)2.5 E(UG_PUSH)-.1 E F0(yet.)2.5 E F3<83>86.536 246 Q F0
(Ev)5 E 3.105(ery thread can ha)-.15 F 3.405 -.15(ve i)-.2 H 3.106(ts o)
.15 F 3.106(wn name, that can be set with)-.25 F F1(DB)5.606 E(UG_PR)-.1
E(OCESS)-.3 E F0 3.106(macro. Thus,)5.606 F("-#p,name1,name2" can be us\
ed to limit the output to speci\214c threads.)94.336 258 Q F3<83>86.536
276 Q F0 1.055(When printing directly to)5 F F1(DB)3.555 E(UG_FILE)-.1 E
F0 1.055(it may be necessary to pre)3.555 F -.15(ve)-.25 G 1.055
(nt other threads from writing).15 F 1.06(something between tw)94.336
288 R 3.56(op)-.1 G 1.06(arts of logically indi)-3.56 F 1.06
(visible output. It is done with)-.25 F F1(DB)3.56 E(UG_LOCK_FILE)-.1 E
F0(and)94.336 300 Q F1(DB)2.5 E(UG_UNLOCK_FILE)-.1 E F0
(macors. See the appropriate section for e)2.5 E(xamples.)-.15 E F3<83>
86.536 318 Q F0 .325("-#o,\214le" and "-#O,\214le" are treated as "-#a,\
\214le" and "-#A,\214le" respecti)5 F -.15(ve)-.25 G(ly).15 E 2.825(.T)
-.65 G .325(hat is all writes to a \214le)-2.825 F(are al)94.336 330 Q
-.1(wa)-.1 G(ys follo).1 E(wed by a \215ush.)-.25 E F3<83>86.536 348 Q
F0("-#i" prints not a PID b)5 E(ut a thread id in the form of "T@nnn")
-.2 E 2.5(-1)274.506 768 S 2.5(7-)-2.5 G 0 Cg EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(PR)69.336 96 Q
(OFILING WITH DB)-.3 E(UG)-.1 E F0 -.4(Wi)94.336 126 S(th).4 E/F2 10
/Times-Italic@0 SF(db)2.629 E(ug)-.2 E F0 .129
(one can do pro\214ling in a machine independent f)2.629 F .13
(ashion, without a need for pro\214led v)-.1 F(ersion)-.15 E .039
(of system libraries.)69.336 138 R -.15(Fo)5.039 G 2.539(rt).15 G(his,)
-2.539 E F2(db)2.539 E(ug)-.2 E F0 .038(can write out a \214le called)
2.539 F F1(db)2.538 E(ugmon.out)-.2 E F0 .038(\(by def)2.538 F 2.538
(ault\). This)-.1 F .038(is an ascii \214le)2.538 F
(containing lines of the form:)69.336 150 Q/F3 10/Courier@0 SF
(<function-name> E <time-entered>)189.336 168 Q
(<function-name> X <time-exited>)189.336 180 Q F0 2.5(As)94.336 216 S
(econd program \()-2.5 E F1(analyze)A F0 2.5(\)r)C
(eads this \214le, and produces a report on standard output.)-2.5 E
1.291(Pro\214ling is enabled through the)94.336 246 R F1(g)3.791 E F0
3.791(\215ag. It)3.791 F 1.291(can tak)3.791 F 3.791(eal)-.1 G 1.291
(ist of function names for which pro\214ling is)-3.791 F 2.5
(enabled. By)69.336 258 R(def)2.5 E(ault, it pro\214les all functions.)
-.1 E .739(The pro\214le \214le is opened for appending.)94.336 288 R
.739(This is in order that one can run a program se)5.739 F -.15(ve)-.25
G .738(ral times,).15 F(and get the sum total of all the times, etc.)
69.336 300 Q(An e)94.336 330 Q(xample of the report generated follo)-.15
E(ws:)-.25 E F3(Profile of Execution)150.336 348 Q
(Execution times are in milliseconds)150.336 360 Q 138(Calls Time)
174.336 384 R 138(----- ----)174.336 396 R 12(Times Percentage Time)
150.336 408 R 18(Spent Percentage)6 F 18(Function Called)78.336 420 R
(of total)12 E(in Function)30 E(of total)18 E(Importance)24 E 18
(======== ======)78.336 432 R 12(========== =========== ==========)12 F
(==========)12 E 42(factorial 5)78.336 444 R 66(83.33 30)42 F 42
(100.00 8333)42 F 72(main 1)78.336 456 R 72(16.67 0)42 F 60(0.00 0)54 F
18(======== ======)78.336 468 R 12(========== =========== ==========)12
F 60(Totals 6)78.336 480 R 66(100.00 30)36 F(100.00)42 E F0 .448
(As you can see, it')94.336 504 R 2.948(sq)-.55 G .449(uite self-e)
-2.948 F 2.949(vident. The)-.25 F F1(Importance)2.949 E F0 .449
(column is a metric obtained by multiplying)2.949 F .651
(the percentage of the calls and the percentage of the time.)69.336 516
R .651(Functions with higher 'importance' bene\214t the)5.651 F
(most from being sped up.)69.336 528 Q .82(As a limitation - setjmp/lon\
gjmp, or child processes, are ignored for the time being. Also, pro\214\
ling)94.336 558 R(does not w)69.336 570 Q(ork in a multi-threaded en)-.1
E(vironment.)-.4 E(Pro\214ling code is \(c\) Binayak Banerjee.)94.336
600 Q 2.5(-1)274.506 768 S 2.5(8-)-2.5 G 0 Cg EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(HINTS AND MISCELLANEOUS)
69.336 96 Q F0 1.564(One of the most useful capabilities of the)94.336
126 R/F2 10/Times-Italic@0 SF(db)4.064 E(ug)-.2 E F0 1.563
(package is to compare the e)4.064 F -.15(xe)-.15 G 1.563
(cutions of a gi).15 F -.15(ve)-.25 G(n).15 E .066(program in tw)69.336
138 R 2.566(od)-.1 G(if)-2.566 E .066(ferent en)-.25 F 2.566
(vironments. This)-.4 F .067(is typically done by e)2.567 F -.15(xe)-.15
G .067(cuting the program in the en).15 F(vironment)-.4 E .251
(where it beha)69.336 150 R -.15(ve)-.2 G 2.751(sp).15 G .251
(roperly and sa)-2.751 F .251(ving the deb)-.2 F .251
(ugger output in a reference \214le.)-.2 F .25
(The program is then run with)5.25 F .267(identical inputs in the en)
69.336 162 R .267(vironment where it misbeha)-.4 F -.15(ve)-.2 G 2.767
(sa).15 G .267(nd the output is ag)-2.767 F .267
(ain captured in a reference \214le.)-.05 F .05(The tw)69.336 174 R 2.55
(or)-.1 G .05(eference \214les can then be dif)-2.55 F .05
(ferentially compared to determine e)-.25 F .05(xactly where e)-.15 F
-.15(xe)-.15 G .05(cution of the tw).15 F(o)-.1 E(processes di)69.336
186 Q -.15(ve)-.25 G -.18(rg).15 G(es.).18 E 3.701(Ar)94.336 216 S 1.201
(elated usage is re)-3.701 F 1.201(gression testing where the e)-.15 F
-.15(xe)-.15 G 1.201(cution of a current v).15 F 1.202
(ersion is compared ag)-.15 F(ainst)-.05 E -.15(exe)69.336 228 S
(cutions of pre).15 E(vious v)-.25 E 2.5(ersions. This)-.15 F
(is most useful when there are only minor changes.)2.5 E .627
(It is not dif)94.336 258 R .627(\214cult to modify an e)-.25 F .627
(xisting compiler to implement some of the functionality of the)-.15 F
F2(db)3.127 E(ug)-.2 E F0 .297(package automatically)69.336 270 R 2.797
(,w)-.65 G .297(ithout source code changes to the program being deb)
-2.797 F 2.797(ugged. In)-.2 F -.1(fa)2.797 G .298(ct, such changes).1 F
.459(were implemented in a v)69.336 282 R .459
(ersion of the Portable C Compiler by the author in less than a day)-.15
F 5.459(.H)-.65 G -.25(ow)-5.459 G -2.15 -.25(ev e).25 H 1.259 -.4(r, i)
.25 H 2.959(ti).4 G(s)-2.959 E .51(strongly encouraged that all ne)
69.336 294 R .51(wly de)-.25 F -.15(ve)-.25 G .51
(loped code continue to use the deb).15 F .51
(ugger macros for the portability)-.2 F(reasons noted earlier)69.336 306
Q 5(.T)-.55 G(he modi\214ed compiler should be used only for testing e)
-5 E(xisting programs.)-.15 E 2.5(-1)274.506 768 S 2.5(9-)-2.5 G 0 Cg EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(DB)69.336 48 Q(UG User Manual)-.1 E
(April 23, 2009)290.73 E/F1 10/Times-Bold@0 SF(CA)69.336 96 Q(VEA)-1.45
E(TS)-.95 E F0(The)94.336 126 Q/F2 10/Times-Italic@0 SF(db)5.533 E(ug)
-.2 E F0 3.033(package w)5.533 F 3.032(orks best with programs which ha)
-.1 F 3.332 -.15(ve ")-.2 H(line oriented").15 E 3.032
(output, such as te)5.532 F(xt)-.15 E .387
(processors, general purpose utilities, etc.)69.336 138 R .387
(It can be interf)5.387 F .388
(aced with screen oriented programs such as visual)-.1 F 1.015(editors \
by rede\214ning the appropriate macros to call special functions for di\
splaying the deb)69.336 150 R 1.015(ugger results.)-.2 F 2.011
(Of course, this ca)69.336 162 R -.15(ve)-.2 G 2.011
(at is not applicable if the deb).15 F 2.011
(ugger output is simply dumped into a \214le for post-)-.2 F -.15(exe)
69.336 174 S(cution e).15 E(xamination.)-.15 E .034
(Programs which use memory allocation functions other than)94.336 204 R
F1(malloc)2.534 E F0 .034(will usually ha)2.534 F .333 -.15(ve p)-.2 H
.033(roblems using).15 F(the standard)69.336 216 Q F2(db)2.5 E(ug)-.2 E
F0 2.5(package. The)2.5 F
(most common problem is multiply allocated memory)2.5 E(.)-.65 E 2.5(-2)
274.506 768 S 2.5(0-)-2.5 G 0 Cg EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Bold@0 SF 3(DBUG)263.502 93.37 S 3(CP)204.798 113.37 S
-.216(ro)-3 G(gram Deb).216 E(ugging P)-.24 E(ackage)-.12 E(by)279
133.37 Q/F1 11/Times-Italic@0 SF -1.947 -.605(Fr e)264.243 152.37 T 2.75
(dF).605 G(ish)-3.245 E/F2 10/Times-Italic@0 SF(ABSTRA)261.871 188.37 Q
(CT)-.3 E/F3 10/Times-Roman@0 SF .004(This document introduces)69.336
224.37 R F2(db)2.504 E(ug)-.2 E F3 2.504(,am).22 G .005
(acro based C deb)-2.504 F .005(ugging package which has pro)-.2 F -.15
(ve)-.15 G 2.505(nt).15 G 2.505(ob)-2.505 G 2.505(eav)-2.505 G .005
(ery \215e)-2.655 F(xible)-.15 E(and useful tool for deb)69.336 236.37 Q
(ugging, testing, and porting C programs.)-.2 E 1.082
(All of the features of the)94.336 266.37 R F2(db)3.582 E(ug)-.2 E F3
1.082(package can be enabled or disabled dynamically at e)3.582 F -.15
(xe)-.15 G 1.081(cution time.).15 F .371
(This means that production programs will run normally when deb)69.336
278.37 R .372(ugging is not enabled, and eliminates the)-.2 F
(need to maintain tw)69.336 290.37 Q 2.5(os)-.1 G(eparate v)-2.5 E
(ersions of a program.)-.15 E(Man)94.336 320.37 Q 5.36(yo)-.15 G 5.36
(ft)-5.36 G 2.859(he things easily accomplished with con)-5.36 F -.15
(ve)-.4 G 2.859(ntional deb).15 F 2.859(ugging tools, such as symbolic)
-.2 F(deb)69.336 332.37 Q .283(uggers, are dif)-.2 F .283
(\214cult or impossible with this package, and vice v)-.25 F 2.783
(ersa. Thus)-.15 F(the)2.783 E F2(db)2.783 E(ug)-.2 E F3 .284
(package should)2.783 F F2(not)2.784 E F3 .07
(be thought of as a replacement or substitute for other deb)69.336
344.37 R .069(ugging tools, b)-.2 F .069(ut simply as a useful)-.2 F F2
(addition)2.569 E F3 .069(to the)2.569 F(program de)69.336 356.37 Q -.15
(ve)-.25 G(lopment and maintenance en).15 E(vironment.)-.4 E 2.5(-2)
274.506 768 S 2.5(1-)-2.5 G 0 Cg EP
%%Trailer
end
%%EOF
